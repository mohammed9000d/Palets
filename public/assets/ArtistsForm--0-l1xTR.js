import{a8 as f,a0 as ie,a5 as oe,a6 as le,r as p,j as e,M as K,B as l,a1 as q,G as s,S as J,J as b,K as y,T as d,a9 as ne,F as de,a2 as S,N as X,I as M}from"./index-D1B0468_.js";import{b as R}from"./api-Qdp-uhWv.js";import{A as Q}from"./Alert-Bj_8tNnp.js";import{T as u}from"./TextField-DMRjBjhn.js";import{I as m}from"./InputAdornment-ComWo2oT.js";import{I as ce}from"./IconCurrencyDollar-DHccLMON.js";import{S as he}from"./Switch-pOV56ntM.js";import{I as B,a as W,b as ue}from"./IconX-DGtKYHa6.js";import{B as I}from"./Button-BS6WOeF2.js";import"./InputLabel-BJex28sC.js";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var me=f("outline","brand-facebook","IconBrandFacebook",[["path",{d:"M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var V=f("outline","brand-instagram","IconBrandInstagram",[["path",{d:"M4 8a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}],["path",{d:"M16.5 7.5v.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xe=f("outline","brand-twitter","IconBrandTwitter",[["path",{d:"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y=f("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pe=f("outline","phone","IconPhone",[["path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z=f("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ee=f("outline","world","IconWorld",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 9h16.8",key:"svg-1"}],["path",{d:"M3.6 15h16.8",key:"svg-2"}],["path",{d:"M11.5 3a17 17 0 0 0 0 18",key:"svg-3"}],["path",{d:"M12.5 3a17 17 0 0 1 0 18",key:"svg-4"}]]);const Ae=()=>{const z=ie(),{slug:_}=oe(),E=le(),c=!!_,[te,O]=p.useState(!1),[C,D]=p.useState(!1),[U,k]=p.useState(""),[L,T]=p.useState(""),[n,F]=p.useState({artist_name:"",bio:"",link:"",is_active:!0,contact_email:"",phone:"",specialties:"",commission_rate:"",social_links:{instagram:"",twitter:"",facebook:"",website:""}}),[re,A]=p.useState({avatar:null,gallery_images:[]}),[v,w]=p.useState({avatar:null,gallery_images:[]}),[j,P]=p.useState({avatar:null,gallery_images:[]});p.useEffect(()=>{var t;c&&((t=E.state)!=null&&t.artist?N(E.state.artist):se())},[c,_]);const se=async()=>{try{O(!0);const t=await R.getBySlug(_);N(t.data.artist)}catch(t){k("Failed to fetch artist data"),console.error("Error fetching artist:",t)}finally{O(!1)}},N=t=>{F({artist_name:t.artist_name||"",bio:t.bio||"",link:t.link||"",is_active:t.is_active,contact_email:t.contact_email||"",phone:t.phone||"",specialties:t.specialties||"",commission_rate:t.commission_rate||"",social_links:t.social_links||{instagram:"",twitter:"",facebook:"",website:""}}),P({avatar:t.avatar_url?{url:t.avatar_url,thumb:t.avatar_thumb_url}:null,gallery_images:t.gallery_images||[]})},h=t=>{const{name:a,value:r,type:i,checked:o}=t.target;if(a.startsWith("social_links.")){const x=a.split(".")[1];F(g=>({...g,social_links:{...g.social_links,[x]:r}}))}else F(x=>({...x,[a]:i==="checkbox"?o:r}))},$=(t,a)=>{const r=Array.from(t.target.files);if(a==="avatar"){const i=r[0];if(i){A(x=>({...x,avatar:i}));const o=new FileReader;o.onload=x=>{w(g=>({...g,avatar:x.target.result}))},o.readAsDataURL(i)}}else a==="gallery_images"&&(A(i=>({...i,gallery_images:[...i.gallery_images,...r]})),r.forEach(i=>{const o=new FileReader;o.onload=x=>{w(g=>({...g,gallery_images:[...g.gallery_images,x.target.result]}))},o.readAsDataURL(i)}))},G=(t,a)=>{t==="avatar"?(A(r=>({...r,avatar:null})),w(r=>({...r,avatar:null}))):t==="gallery_images"&&(A(r=>({...r,gallery_images:r.gallery_images.filter((i,o)=>o!==a)})),w(r=>({...r,gallery_images:r.gallery_images.filter((i,o)=>o!==a)})))},H=(t,a)=>{t==="avatar"?P(r=>({...r,avatar:null})):t==="gallery_images"&&P(r=>({...r,gallery_images:r.gallery_images.filter((i,o)=>o!==a)}))},ae=async t=>{var a,r;t.preventDefault(),D(!0),k(""),T("");try{const i={...n,...re};c&&(j.avatar||(i.remove_avatar=!0));let o;c?o=await R.update(_,i):o=await R.create(i),T(`Artist ${c?"updated":"created"} successfully!`),setTimeout(()=>{z("/admin/artists")},2e3)}catch(i){if((r=(a=i.response)==null?void 0:a.data)!=null&&r.errors){const o=Object.values(i.response.data.errors).flat();k(o.join(", "))}else k(`Failed to ${c?"update":"create"} artist`);console.error("Error submitting form:",i)}finally{D(!1)}};return te?e.jsx(K,{title:c?"Edit Artist":"Create Artist",children:e.jsx(l,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(q,{})})}):e.jsxs(K,{title:c?"Edit Artist":"Create New Artist",secondary:e.jsx(I,{startIcon:e.jsx(ue,{}),onClick:()=>z("/admin/artists"),children:"Back to Artists"}),children:[U&&e.jsx(Q,{severity:"error",sx:{mb:2},children:U}),L&&e.jsx(Q,{severity:"success",sx:{mb:2},children:L}),e.jsx("form",{onSubmit:ae,children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,lg:8,children:e.jsxs(J,{spacing:3,children:[e.jsx(b,{elevation:2,sx:{borderRadius:2},children:e.jsxs(y,{sx:{p:3},children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(Z,{size:24,style:{marginRight:8,color:"#1976d2"}}),e.jsx(d,{variant:"h5",fontWeight:"600",color:"primary",children:"Artist Profile"})]}),e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,children:e.jsx(u,{fullWidth:!0,label:"Artist Name",name:"artist_name",value:n.artist_name,onChange:h,required:!0,variant:"outlined",InputProps:{startAdornment:e.jsx(m,{position:"start",children:e.jsx(Z,{size:20})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2"}}}})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(u,{fullWidth:!0,label:"Biography",name:"bio",value:n.bio,onChange:h,multiline:!0,rows:4,placeholder:"Tell us about the artist's background, style, and artistic journey...",sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2"}}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Art Specialties",name:"specialties",value:n.specialties,onChange:h,placeholder:"Oil painting, Watercolor, Digital art...",InputProps:{startAdornment:e.jsx(m,{position:"start",children:e.jsx(ne,{size:20})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2"}}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Commission Rate",name:"commission_rate",type:"number",value:n.commission_rate,onChange:h,InputProps:{startAdornment:e.jsx(m,{position:"start",children:e.jsx(ce,{size:20})}),endAdornment:e.jsx(m,{position:"end",children:"%"})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2"}}}})})]})]})}),e.jsx(b,{elevation:2,sx:{borderRadius:2},children:e.jsxs(y,{sx:{p:3},children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(Y,{size:24,style:{marginRight:8,color:"#1976d2"}}),e.jsx(d,{variant:"h5",fontWeight:"600",color:"primary",children:"Contact Information"})]}),e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Contact Email",name:"contact_email",type:"email",value:n.contact_email,onChange:h,InputProps:{startAdornment:e.jsx(m,{position:"start",children:e.jsx(Y,{size:20})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2"}}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Phone Number",name:"phone",value:n.phone,onChange:h,InputProps:{startAdornment:e.jsx(m,{position:"start",children:e.jsx(pe,{size:20})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2"}}}})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(u,{fullWidth:!0,label:"Portfolio/Website URL",name:"link",value:n.link,onChange:h,placeholder:"https://artist-portfolio.com",InputProps:{startAdornment:e.jsx(m,{position:"start",children:e.jsx(ee,{size:20})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2"}}}})})]})]})})]})}),e.jsx(s,{item:!0,xs:12,lg:4,children:e.jsx(J,{spacing:3,children:e.jsx(b,{elevation:2,sx:{borderRadius:2,bgcolor:"#f8f9fa"},children:e.jsxs(y,{sx:{p:3},children:[e.jsx(d,{variant:"h6",fontWeight:"600",mb:2,color:"primary",children:"Artist Status"}),e.jsx(de,{control:e.jsx(he,{checked:n.is_active,onChange:h,name:"is_active",color:"primary",size:"medium"}),label:e.jsxs(l,{children:[e.jsx(d,{variant:"body1",fontWeight:"500",children:n.is_active?"Active Artist":"Inactive Artist"}),e.jsx(d,{variant:"body2",color:"text.secondary",children:n.is_active?"Artist profile is visible to public":"Artist profile is hidden from public"})]}),sx:{alignItems:"flex-start",mb:1}})]})})})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(b,{elevation:2,sx:{borderRadius:2},children:e.jsxs(y,{sx:{p:3},children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(V,{size:24,style:{marginRight:8,color:"#1976d2"}}),e.jsx(d,{variant:"h5",fontWeight:"600",color:"primary",children:"Social Media & Online Presence"})]}),e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Instagram Handle",name:"social_links.instagram",value:n.social_links.instagram,onChange:h,placeholder:"@artistname",InputProps:{startAdornment:e.jsx(m,{position:"start",children:e.jsx(V,{size:20,style:{color:"#E4405F"}})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#E4405F"},"&.Mui-focused fieldset":{borderColor:"#E4405F"}}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Twitter Handle",name:"social_links.twitter",value:n.social_links.twitter,onChange:h,placeholder:"@artistname",InputProps:{startAdornment:e.jsx(m,{position:"start",children:e.jsx(xe,{size:20,style:{color:"#1DA1F2"}})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#1DA1F2"},"&.Mui-focused fieldset":{borderColor:"#1DA1F2"}}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Facebook Page",name:"social_links.facebook",value:n.social_links.facebook,onChange:h,placeholder:"Facebook page name",InputProps:{startAdornment:e.jsx(m,{position:"start",children:e.jsx(me,{size:20,style:{color:"#1877F2"}})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#1877F2"},"&.Mui-focused fieldset":{borderColor:"#1877F2"}}}})}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,label:"Personal Website",name:"social_links.website",value:n.social_links.website,onChange:h,placeholder:"https://artist-website.com",InputProps:{startAdornment:e.jsx(m,{position:"start",children:e.jsx(ee,{size:20})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"#1976d2"},"&.Mui-focused fieldset":{borderColor:"#1976d2"}}}})})]})]})})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(b,{elevation:2,sx:{borderRadius:2},children:e.jsxs(y,{sx:{p:3},children:[e.jsxs(l,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(B,{size:24,style:{marginRight:8,color:"#1976d2"}}),e.jsx(d,{variant:"h5",fontWeight:"600",color:"primary",children:"Artist Images"})]}),e.jsxs(s,{container:!0,spacing:4,children:[e.jsx(s,{item:!0,xs:12,md:6,children:e.jsxs(S,{elevation:1,sx:{p:3,borderRadius:2,bgcolor:"#f8f9fa"},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"600",children:"Profile Avatar"}),e.jsx(d,{variant:"body2",color:"text.secondary",mb:2,children:"Upload a professional headshot or portrait (recommended: 400x400px)"}),e.jsxs(l,{display:"flex",alignItems:"center",gap:2,mb:3,children:[j.avatar&&e.jsxs(l,{position:"relative",children:[e.jsx(X,{src:j.avatar.thumb,sx:{width:100,height:100,border:"3px solid #1976d2",boxShadow:2}}),e.jsx(M,{size:"small",color:"error",sx:{position:"absolute",top:-8,right:-8,bgcolor:"error.main",color:"white","&:hover":{bgcolor:"error.dark"}},onClick:()=>H("avatar"),children:e.jsx(W,{size:16})})]}),v.avatar&&e.jsxs(l,{position:"relative",children:[e.jsx(X,{src:v.avatar,sx:{width:100,height:100,border:"3px solid #4caf50",boxShadow:2}}),e.jsx(M,{size:"small",color:"error",sx:{position:"absolute",top:-8,right:-8,bgcolor:"error.main",color:"white","&:hover":{bgcolor:"error.dark"}},onClick:()=>G("avatar"),children:e.jsx(W,{size:16})})]})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>$(t,"avatar"),style:{display:"none"},id:"avatar-upload"}),e.jsx("label",{htmlFor:"avatar-upload",children:e.jsx(I,{variant:"contained",component:"span",startIcon:e.jsx(B,{}),fullWidth:!0,sx:{py:1.5},children:j.avatar||v.avatar?"Change Avatar":"Upload Avatar"})})]})}),e.jsx(s,{item:!0,xs:12,md:6,children:e.jsxs(S,{elevation:1,sx:{p:3,borderRadius:2,bgcolor:"#f8f9fa"},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,color:"primary",fontWeight:"600",children:"Gallery Images"}),e.jsx(d,{variant:"body2",color:"text.secondary",mb:2,children:"Add portfolio images showcasing the artist's work"}),e.jsxs(l,{mb:3,children:[j.gallery_images.length>0&&e.jsx(l,{display:"flex",flexWrap:"wrap",gap:1,mb:2,children:j.gallery_images.map((t,a)=>e.jsxs(l,{position:"relative",children:[e.jsx("img",{src:t.thumb,alt:`Gallery ${a}`,style:{width:80,height:80,objectFit:"cover",borderRadius:8,border:"2px solid #1976d2"}}),e.jsx(M,{size:"small",color:"error",sx:{position:"absolute",top:-8,right:-8,bgcolor:"error.main",color:"white","&:hover":{bgcolor:"error.dark"}},onClick:()=>H("gallery_images",a),children:e.jsx(W,{size:16})})]},a))}),v.gallery_images.length>0&&e.jsx(l,{display:"flex",flexWrap:"wrap",gap:1,mb:2,children:v.gallery_images.map((t,a)=>e.jsxs(l,{position:"relative",children:[e.jsx("img",{src:t,alt:`Preview ${a}`,style:{width:80,height:80,objectFit:"cover",borderRadius:8,border:"2px solid #4caf50"}}),e.jsx(M,{size:"small",color:"error",sx:{position:"absolute",top:-8,right:-8,bgcolor:"error.main",color:"white","&:hover":{bgcolor:"error.dark"}},onClick:()=>G("gallery_images",a),children:e.jsx(W,{size:16})})]},a))})]}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:t=>$(t,"gallery_images"),style:{display:"none"},id:"gallery-upload"}),e.jsx("label",{htmlFor:"gallery-upload",children:e.jsx(I,{variant:"outlined",component:"span",startIcon:e.jsx(B,{}),fullWidth:!0,sx:{py:1.5},children:"Add Gallery Images"})})]})})]})]})})}),e.jsx(s,{item:!0,xs:12,children:e.jsx(S,{elevation:2,sx:{p:3,borderRadius:2,bgcolor:"#f8f9fa"},children:e.jsxs(l,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(l,{children:[e.jsx(d,{variant:"h6",fontWeight:"600",color:"primary",children:c?"Update Artist Profile":"Create New Artist"}),e.jsx(d,{variant:"body2",color:"text.secondary",children:c?"Save changes to update the artist profile":"Add this artist to your gallery"})]}),e.jsxs(l,{display:"flex",gap:2,children:[e.jsx(I,{variant:"outlined",onClick:()=>z("/admin/artists"),disabled:C,size:"large",sx:{px:4},children:"Cancel"}),e.jsx(I,{type:"submit",variant:"contained",disabled:C,startIcon:C?e.jsx(q,{size:20,color:"inherit"}):null,size:"large",sx:{px:4,py:1.5,bgcolor:"#1976d2","&:hover":{bgcolor:"#1565c0"}},children:C?`${c?"Updating":"Creating"}...`:`${c?"Update":"Create"} Artist`})]})]})})})]})})]})};export{Ae as default};
