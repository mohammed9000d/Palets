import{a8 as p,a0 as re,a5 as ie,a6 as ne,u as oe,r as m,j as e,M as le,B as i,a1 as $,q as y,a9 as ce,I as W,T as h,G as l,F as de,aa as he,N as ue,ab as me}from"./index-ByOtDWtE.js";import{b as T}from"./api-pH0XAhJ5.js";import{I as pe,a as xe,b as ge,c as G}from"./IconX-CKPnouZD.js";import{A as N}from"./Alert-BZtpLnbm.js";import{T as v}from"./TextField-3-DLEGSP.js";import{I as j}from"./InputAdornment-B9yLzoYc.js";import{S as ve}from"./Switch-DKaGOxkn.js";import{I as be}from"./IconCurrencyDollar-kOR_qD3P.js";import{B as P}from"./Button-CkrTntBS.js";import{I as je}from"./IconTrash-Bv7o_oSw.js";import"./InputLabel-26HtUWP1.js";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ye=p("outline","brand-facebook","IconBrandFacebook",[["path",{d:"M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fe=p("outline","brand-instagram","IconBrandInstagram",[["path",{d:"M4 8a4 4 0 0 1 4 -4h8a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-8a4 4 0 0 1 -4 -4z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}],["path",{d:"M16.5 7.5v.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ke=p("outline","brand-linkedin","IconBrandLinkedin",[["path",{d:"M8 11v5",key:"svg-0"}],["path",{d:"M8 8v.01",key:"svg-1"}],["path",{d:"M12 16v-5",key:"svg-2"}],["path",{d:"M16 16v-3a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M3 7a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v10a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4z",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ie=p("outline","brand-twitter","IconBrandTwitter",[["path",{d:"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _e=p("outline","brand-youtube","IconBrandYoutube",[["path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z",key:"svg-0"}],["path",{d:"M10 9l5 3l-5 3z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ce=p("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var we=p("outline","phone","IconPhone",[["path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var q=p("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Y=p("outline","world","IconWorld",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 9h16.8",key:"svg-1"}],["path",{d:"M3.6 15h16.8",key:"svg-2"}],["path",{d:"M11.5 3a17 17 0 0 0 0 18",key:"svg-3"}],["path",{d:"M12.5 3a17 17 0 0 1 0 18",key:"svg-4"}]]);const Le=()=>{const S=re(),{slug:f}=ie();ne();const u=!!f,r=oe(),[H,E]=m.useState(!1),[B,L]=m.useState(!1),[O,k]=m.useState(""),[D,U]=m.useState(""),[c,C]=m.useState({artist_name:"",bio:"",link:"",is_active:!0,social_links:{instagram:"",twitter:"",facebook:"",linkedin:"",youtube:"",website:""},contact_email:"",phone:"",specialties:"",commission_rate:""}),[K,w]=m.useState({avatar:null,gallery_images:[]}),[M,A]=m.useState({avatar:null,gallery_images:[]}),[I,z]=m.useState({avatar:null,gallery:[]});m.useEffect(()=>{u&&f&&X()},[u,f]);const X=async()=>{var t,a,n,s,d,_;E(!0);try{const o=(await T.getBySlug(f)).data.artist;C({artist_name:o.artist_name||"",bio:o.bio||"",link:o.link||"",is_active:o.is_active,social_links:{instagram:((t=o.social_links)==null?void 0:t.instagram)||"",twitter:((a=o.social_links)==null?void 0:a.twitter)||"",facebook:((n=o.social_links)==null?void 0:n.facebook)||"",linkedin:((s=o.social_links)==null?void 0:s.linkedin)||"",youtube:((d=o.social_links)==null?void 0:d.youtube)||"",website:((_=o.social_links)==null?void 0:_.website)||""},contact_email:o.contact_email||"",phone:o.phone||"",specialties:o.specialties||"",commission_rate:o.commission_rate||""}),o.avatar_url&&z(F=>({...F,avatar:o.avatar_url})),o.gallery_images&&o.gallery_images.length>0&&z(F=>({...F,gallery:o.gallery_images.map(R=>({id:R.id,url:R.url,thumb:R.thumb}))}))}catch(b){k("Failed to load artist data"),console.error("Error loading artist:",b)}finally{E(!1)}},x=t=>{const{name:a,value:n}=t.target;if(a.startsWith("social_")){const s=a.replace("social_","");C(d=>({...d,social_links:{...d.social_links,[s]:n}}))}else C(s=>({...s,[a]:n}))},J=t=>{C(a=>({...a,is_active:t.target.checked}))},Q=t=>{const a=t.target.files[0];if(a){w(s=>({...s,avatar:a}));const n=new FileReader;n.onloadend=()=>{A(s=>({...s,avatar:n.result}))},n.readAsDataURL(a)}},V=t=>{const a=Array.from(t.target.files);w(n=>({...n,gallery_images:[...n.gallery_images,...a]})),a.forEach(n=>{const s=new FileReader;s.onloadend=()=>{A(d=>({...d,gallery_images:[...d.gallery_images,s.result]}))},s.readAsDataURL(n)})},Z=()=>{w(t=>({...t,avatar:null})),A(t=>({...t,avatar:null})),u&&z(t=>({...t,avatar:null}))},ee=t=>{w(a=>({...a,gallery_images:a.gallery_images.filter((n,s)=>s!==t)})),A(a=>({...a,gallery_images:a.gallery_images.filter((n,s)=>s!==t)}))},te=t=>{z(a=>({...a,gallery:a.gallery.filter((n,s)=>s!==t)}))},ae=async t=>{var a,n;t.preventDefault(),L(!0),k(""),U("");try{const s={};Object.keys(c.social_links).forEach(b=>{c.social_links[b]&&c.social_links[b].trim()!==""&&(s[b]=c.social_links[b].trim())});const d={...c,social_links:s,...K};u&&(I.avatar||(d.remove_avatar=!0));let _;u?_=await T.update(f,d):_=await T.create(d),U(`Artist ${u?"updated":"created"} successfully!`),setTimeout(()=>{S("/admin/artists")},1500)}catch(s){if((n=(a=s.response)==null?void 0:a.data)!=null&&n.errors){const d=Object.values(s.response.data.errors).flat();k(d.join(", "))}else k(`Failed to ${u?"update":"create"} artist`);console.error("Error submitting form:",s)}finally{L(!1)}};if(H)return e.jsx(le,{children:e.jsx(i,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx($,{})})});const g={"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:r.palette.mode==="dark"?y(r.palette.background.paper,.8):"#fff","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:r.palette.primary.main}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderWidth:1.5}}},"& .MuiOutlinedInput-notchedOutline":{borderColor:r.palette.mode==="dark"?y(r.palette.divider,.2):y(r.palette.divider,.3)},"& .MuiInputLabel-root":{color:r.palette.text.secondary,fontWeight:400}},se={instagram:e.jsx(fe,{size:20}),twitter:e.jsx(Ie,{size:20}),facebook:e.jsx(ye,{size:20}),linkedin:e.jsx(ke,{size:20}),youtube:e.jsx(_e,{size:20}),website:e.jsx(Y,{size:20})};return e.jsx(ce,{in:!0,children:e.jsxs(i,{children:[e.jsxs(i,{mb:4,children:[e.jsxs(i,{display:"flex",alignItems:"center",gap:2,mb:1,children:[e.jsx(W,{onClick:()=>S("/admin/artists"),size:"small",children:e.jsx(pe,{})}),e.jsx(h,{variant:"h2",fontWeight:600,children:u?"Edit Artist":"Create New Artist"})]}),e.jsx(h,{variant:"body2",color:"text.secondary",children:u?"Update artist information and media":"Add a new artist to your gallery"})]}),O&&e.jsx(N,{severity:"error",onClose:()=>k(""),sx:{mb:3},children:O}),D&&e.jsx(N,{severity:"success",icon:e.jsx(xe,{}),sx:{mb:3},children:D}),e.jsxs("form",{onSubmit:ae,children:[e.jsxs(l,{container:!0,spacing:4,children:[e.jsx(l,{item:!0,xs:12,md:8,children:e.jsxs(i,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(i,{children:[e.jsx(h,{variant:"h5",fontWeight:500,mb:2.5,children:"Basic Information"}),e.jsxs(l,{container:!0,spacing:2.5,children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(v,{fullWidth:!0,label:"Artist Name",name:"artist_name",value:c.artist_name,onChange:x,required:!0,sx:g,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(q,{size:20,style:{color:r.palette.text.secondary}})})}})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(v,{fullWidth:!0,label:"Biography",name:"bio",value:c.bio,onChange:x,multiline:!0,rows:4,sx:g,placeholder:"Tell us about the artist..."})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,label:"Portfolio/Website URL",name:"link",value:c.link,onChange:x,sx:g,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(Y,{size:20,style:{color:r.palette.text.secondary}})})},placeholder:"https://artist-portfolio.com"})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(de,{control:e.jsx(ve,{checked:c.is_active,onChange:J,color:"primary"}),label:e.jsxs(i,{children:[e.jsx(h,{variant:"body1",children:"Active Artist"}),e.jsx(h,{variant:"caption",color:"text.secondary",children:"Artist profile is visible to public"})]}),sx:{m:0,"& .MuiFormControlLabel-label":{ml:1}}})})]})]}),e.jsxs(i,{children:[e.jsx(h,{variant:"h5",fontWeight:500,mb:2.5,children:"Contact Information"}),e.jsxs(l,{container:!0,spacing:2.5,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,label:"Contact Email",name:"contact_email",type:"email",value:c.contact_email,onChange:x,sx:g,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(Ce,{size:20,style:{color:r.palette.text.secondary}})})}})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,label:"Phone Number",name:"phone",value:c.phone,onChange:x,sx:g,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(we,{size:20,style:{color:r.palette.text.secondary}})})}})})]})]}),e.jsxs(i,{children:[e.jsx(h,{variant:"h5",fontWeight:500,mb:2.5,children:"Professional Details"}),e.jsxs(l,{container:!0,spacing:2.5,children:[e.jsx(l,{item:!0,xs:12,md:8,children:e.jsx(v,{fullWidth:!0,label:"Art Specialties",name:"specialties",value:c.specialties,onChange:x,sx:g,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(he,{size:20,style:{color:r.palette.text.secondary}})})},placeholder:"Oil painting, Watercolor, Digital art..."})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsx(v,{fullWidth:!0,label:"Commission Rate (%)",name:"commission_rate",type:"number",value:c.commission_rate,onChange:x,sx:g,InputProps:{startAdornment:e.jsx(j,{position:"start",children:e.jsx(be,{size:20,style:{color:r.palette.text.secondary}})}),inputProps:{min:0,max:99.99,step:.01}}})})]})]}),e.jsxs(i,{children:[e.jsx(h,{variant:"h5",fontWeight:500,mb:2.5,children:"Social Media & Online Presence"}),e.jsx(l,{container:!0,spacing:2.5,children:Object.keys(c.social_links).map(t=>e.jsx(l,{item:!0,xs:12,sm:6,md:4,children:e.jsx(v,{fullWidth:!0,label:t.charAt(0).toUpperCase()+t.slice(1),name:`social_${t}`,value:c.social_links[t],onChange:x,sx:g,InputProps:{startAdornment:e.jsx(j,{position:"start",children:se[t]})},placeholder:t==="website"?"https://...":"@username"})},t))})]})]})}),e.jsx(l,{item:!0,xs:12,md:4,children:e.jsxs(i,{sx:{position:"sticky",top:24},children:[e.jsxs(i,{mb:4,children:[e.jsx(h,{variant:"h5",fontWeight:500,mb:2.5,children:"Profile Photo"}),e.jsxs(i,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsx(ue,{src:M.avatar||I.avatar,sx:{width:160,height:160,border:`2px solid ${r.palette.divider}`,backgroundColor:r.palette.background.default},children:e.jsx(q,{size:60,style:{color:r.palette.text.disabled}})}),e.jsxs(i,{display:"flex",gap:1,children:[e.jsxs(P,{variant:"outlined",component:"label",startIcon:e.jsx(ge,{size:18}),size:"small",sx:{borderRadius:2,textTransform:"none",fontWeight:400},children:["Upload Photo",e.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:Q})]}),(M.avatar||I.avatar)&&e.jsx(W,{onClick:Z,size:"small",sx:{color:"error.main",border:"1px solid",borderColor:"error.main","&:hover":{backgroundColor:y(r.palette.error.main,.08)}},children:e.jsx(je,{size:18})})]})]})]}),e.jsxs(i,{children:[e.jsx(h,{variant:"h5",fontWeight:500,mb:2.5,children:"Gallery Images"}),e.jsxs(P,{variant:"outlined",component:"label",fullWidth:!0,startIcon:e.jsx(me,{size:18}),sx:{mb:2,py:1.5,borderRadius:2,borderStyle:"dashed",textTransform:"none",fontWeight:400},children:["Add Gallery Images",e.jsx("input",{type:"file",hidden:!0,multiple:!0,accept:"image/*",onChange:V})]}),I.gallery.length>0&&e.jsxs(i,{mb:2,children:[e.jsx(h,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:"Existing images"}),e.jsx(i,{display:"flex",flexWrap:"wrap",gap:1,children:I.gallery.map((t,a)=>e.jsxs(i,{sx:{position:"relative",borderRadius:1.5,overflow:"hidden",border:`1px solid ${r.palette.divider}`},children:[e.jsx("img",{src:t.thumb||t.url||t,alt:`Gallery ${a+1}`,style:{width:80,height:80,objectFit:"cover"}}),e.jsx(W,{size:"small",onClick:()=>te(a),sx:{position:"absolute",top:2,right:2,backgroundColor:y(r.palette.background.paper,.9),"&:hover":{backgroundColor:r.palette.background.paper}},children:e.jsx(G,{size:16})})]},a))})]}),M.gallery_images.length>0&&e.jsxs(i,{children:[e.jsx(h,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:"New images to upload"}),e.jsx(i,{display:"flex",flexWrap:"wrap",gap:1,children:M.gallery_images.map((t,a)=>e.jsxs(i,{sx:{position:"relative",borderRadius:1.5,overflow:"hidden",border:`1px solid ${r.palette.primary.main}`},children:[e.jsx("img",{src:t,alt:`New ${a+1}`,style:{width:80,height:80,objectFit:"cover"}}),e.jsx(W,{size:"small",onClick:()=>ee(a),sx:{position:"absolute",top:2,right:2,backgroundColor:y(r.palette.background.paper,.9),"&:hover":{backgroundColor:r.palette.background.paper}},children:e.jsx(G,{size:16})})]},a))})]})]})]})})]}),e.jsxs(i,{sx:{mt:5,pt:3,borderTop:`1px solid ${r.palette.divider}`,display:"flex",justifyContent:"flex-end",gap:2},children:[e.jsx(P,{variant:"outlined",onClick:()=>S("/admin/artists"),disabled:B,sx:{borderRadius:2,px:3,textTransform:"none",fontWeight:400},children:"Cancel"}),e.jsx(P,{type:"submit",variant:"contained",disabled:B,sx:{borderRadius:2,px:4,textTransform:"none",fontWeight:500,boxShadow:"none","&:hover":{boxShadow:"none"}},children:B?e.jsxs(e.Fragment,{children:[e.jsx($,{size:20,sx:{mr:1}}),u?"Updating...":"Creating..."]}):e.jsx(e.Fragment,{children:u?"Update Artist":"Create Artist"})})]})]})]})})};export{Le as default};
