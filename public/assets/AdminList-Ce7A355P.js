import{a2 as _,g as f,d as C,r as p,e as T,u as De,a3 as J,a4 as V,a5 as Re,o as W,i as m,s as b,j as a,k as h,l as k,a6 as $e,a7 as Pe,m as B,T as Y,a8 as Ae,a9 as He,v as N,aa as We,M as q,B as Be,ab as Ne,ac as G,I as Q}from"./index-BGdKvIOI.js";import{a as Z}from"./api-D2le5508.js";import{A as ze}from"./Alert-BcvdOSLe.js";import{B as L}from"./Button-BuseA05K.js";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ue=_("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ie=_("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fe=_("outline","trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]]);function Ee(e){return C("MuiDialog",e)}const O=f("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),re=p.createContext({}),Le=b(Pe,{name:"MuiDialog",slot:"Backdrop",overrides:(e,o)=>o.backdrop})({zIndex:-1}),Oe=e=>{const{classes:o,scroll:t,maxWidth:s,fullWidth:i,fullScreen:r}=e,l={root:["root"],container:["container",`scroll${h(t)}`],paper:["paper",`paperScroll${h(t)}`,`paperWidth${h(String(s))}`,i&&"paperFullWidth",r&&"paperFullScreen"]};return k(l,Ee,o)},Xe=b($e,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),Ye=b("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.container,o[`scroll${h(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),_e=b(J,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.paper,o[`scrollPaper${h(t.scroll)}`],o[`paperWidth${h(String(t.maxWidth))}`],t.fullWidth&&o.paperFullWidth,t.fullScreen&&o.paperFullScreen]}})(B(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:o})=>!o.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${O.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(o=>o!=="xs").map(o=>({props:{maxWidth:o},style:{maxWidth:`${e.breakpoints.values[o]}${e.breakpoints.unit}`,[`&.${O.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[o]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:o})=>o.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:o})=>o.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${O.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Je=p.forwardRef(function(o,t){const s=T({props:o,name:"MuiDialog"}),i=De(),r={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":n,"aria-modal":d=!0,BackdropComponent:g,BackdropProps:y,children:w,className:M,disableEscapeKeyDown:x=!1,fullScreen:j=!1,fullWidth:c=!1,maxWidth:v="sm",onClick:S,onClose:D,open:$,PaperComponent:U=J,PaperProps:P={},scroll:le="paper",slots:ie={},slotProps:ce={},TransitionComponent:de=V,transitionDuration:K=r,TransitionProps:pe,...ue}=s,R={...s,disableEscapeKeyDown:x,fullScreen:j,fullWidth:c,maxWidth:v,scroll:le},I=Oe(R),F=p.useRef(),ge=H=>{F.current=H.target===H.currentTarget},xe=H=>{S&&S(H),F.current&&(F.current=null,D&&D(H,"backdropClick"))},E=Re(n),ye=p.useMemo(()=>({titleId:E}),[E]),be={transition:de,...ie},he={transition:pe,paper:P,backdrop:y,...ce},A={slots:be,slotProps:he},[ve,me]=W("root",{elementType:Xe,shouldForwardComponentProp:!0,externalForwardedProps:A,ownerState:R,className:m(I.root,M),ref:t}),[fe,Ce]=W("backdrop",{elementType:Le,shouldForwardComponentProp:!0,externalForwardedProps:A,ownerState:R}),[Te,ke]=W("paper",{elementType:_e,shouldForwardComponentProp:!0,externalForwardedProps:A,ownerState:R,className:m(I.paper,P.className)}),[we,je]=W("container",{elementType:Ye,externalForwardedProps:A,ownerState:R,className:I.container}),[Me,Se]=W("transition",{elementType:V,externalForwardedProps:A,ownerState:R,additionalProps:{appear:!0,in:$,timeout:K,role:"presentation"}});return a.jsx(ve,{closeAfterTransition:!0,slots:{backdrop:fe},slotProps:{backdrop:{transitionDuration:K,as:g,...Ce}},disableEscapeKeyDown:x,onClose:D,open:$,onClick:xe,...me,...ue,children:a.jsx(Me,{...Se,children:a.jsx(we,{onMouseDown:ge,...je,children:a.jsx(Te,{as:U,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":E,"aria-modal":d,...ke,children:a.jsx(re.Provider,{value:ye,children:w})})})})})});function Ke(e){return C("MuiDialogActions",e)}f("MuiDialogActions",["root","spacing"]);const Ve=e=>{const{classes:o,disableSpacing:t}=e;return k({root:["root",!t&&"spacing"]},Ke,o)},qe=b("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,!t.disableSpacing&&o.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Ge=p.forwardRef(function(o,t){const s=T({props:o,name:"MuiDialogActions"}),{className:i,disableSpacing:r=!1,...l}=s,n={...s,disableSpacing:r},d=Ve(n);return a.jsx(qe,{className:m(d.root,i),ownerState:n,ref:t,...l})});function Qe(e){return C("MuiDialogContent",e)}f("MuiDialogContent",["root","dividers"]);function Ze(e){return C("MuiDialogTitle",e)}const eo=f("MuiDialogTitle",["root"]),oo=e=>{const{classes:o,dividers:t}=e;return k({root:["root",t&&"dividers"]},Qe,o)},to=b("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,t.dividers&&o.dividers]}})(B(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:o})=>o.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:o})=>!o.dividers,style:{[`.${eo.root} + &`]:{paddingTop:0}}}]}))),ao=p.forwardRef(function(o,t){const s=T({props:o,name:"MuiDialogContent"}),{className:i,dividers:r=!1,...l}=s,n={...s,dividers:r},d=oo(n);return a.jsx(to,{className:m(d.root,i),ownerState:n,ref:t,...l})}),so=e=>{const{classes:o}=e;return k({root:["root"]},Ze,o)},ro=b(Y,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),no=p.forwardRef(function(o,t){const s=T({props:o,name:"MuiDialogTitle"}),{className:i,id:r,...l}=s,n=s,d=so(n),{titleId:g=r}=p.useContext(re);return a.jsx(ro,{component:"h2",className:m(d.root,i),ownerState:n,ref:t,variant:"h6",id:r??g,...l})}),ne=p.createContext();function lo(e){return C("MuiTable",e)}f("MuiTable",["root","stickyHeader"]);const io=e=>{const{classes:o,stickyHeader:t}=e;return k({root:["root",t&&"stickyHeader"]},lo,o)},co=b("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,t.stickyHeader&&o.stickyHeader]}})(B(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:o})=>o.stickyHeader,style:{borderCollapse:"separate"}}]}))),ee="table",po=p.forwardRef(function(o,t){const s=T({props:o,name:"MuiTable"}),{className:i,component:r=ee,padding:l="normal",size:n="medium",stickyHeader:d=!1,...g}=s,y={...s,component:r,padding:l,size:n,stickyHeader:d},w=io(y),M=p.useMemo(()=>({padding:l,size:n,stickyHeader:d}),[l,n,d]);return a.jsx(ne.Provider,{value:M,children:a.jsx(co,{as:r,role:r===ee?null:"table",ref:t,className:m(w.root,i),ownerState:y,...g})})}),z=p.createContext();function uo(e){return C("MuiTableBody",e)}f("MuiTableBody",["root"]);const go=e=>{const{classes:o}=e;return k({root:["root"]},uo,o)},xo=b("tbody",{name:"MuiTableBody",slot:"Root"})({display:"table-row-group"}),yo={variant:"body"},oe="tbody",bo=p.forwardRef(function(o,t){const s=T({props:o,name:"MuiTableBody"}),{className:i,component:r=oe,...l}=s,n={...s,component:r},d=go(n);return a.jsx(z.Provider,{value:yo,children:a.jsx(xo,{className:m(d.root,i),as:r,ref:t,role:r===oe?null:"rowgroup",ownerState:n,...l})})});function ho(e){return C("MuiTableCell",e)}const vo=f("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),mo=e=>{const{classes:o,variant:t,align:s,padding:i,size:r,stickyHeader:l}=e,n={root:["root",t,l&&"stickyHeader",s!=="inherit"&&`align${h(s)}`,i!=="normal"&&`padding${h(i)}`,`size${h(r)}`]};return k(n,ho,o)},fo=b("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,o[t.variant],o[`size${h(t.size)}`],t.padding!=="normal"&&o[`padding${h(t.padding)}`],t.align!=="inherit"&&o[`align${h(t.align)}`],t.stickyHeader&&o.stickyHeader]}})(B(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?Ae(N(e.palette.divider,1),.88):He(N(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${vo.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:o})=>o.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),u=p.forwardRef(function(o,t){const s=T({props:o,name:"MuiTableCell"}),{align:i="inherit",className:r,component:l,padding:n,scope:d,size:g,sortDirection:y,variant:w,...M}=s,x=p.useContext(ne),j=p.useContext(z),c=j&&j.variant==="head";let v;l?v=l:v=c?"th":"td";let S=d;v==="td"?S=void 0:!S&&c&&(S="col");const D=w||j&&j.variant,$={...s,align:i,component:v,padding:n||(x&&x.padding?x.padding:"normal"),size:g||(x&&x.size?x.size:"medium"),sortDirection:y,stickyHeader:D==="head"&&x&&x.stickyHeader,variant:D},U=mo($);let P=null;return y&&(P=y==="asc"?"ascending":"descending"),a.jsx(fo,{as:v,ref:t,className:m(U.root,r),"aria-sort":P,scope:S,ownerState:$,...M})});function Co(e){return C("MuiTableContainer",e)}f("MuiTableContainer",["root"]);const To=e=>{const{classes:o}=e;return k({root:["root"]},Co,o)},ko=b("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"}),wo=p.forwardRef(function(o,t){const s=T({props:o,name:"MuiTableContainer"}),{className:i,component:r="div",...l}=s,n={...s,component:r},d=To(n);return a.jsx(ko,{ref:t,as:r,className:m(d.root,i),ownerState:n,...l})});function jo(e){return C("MuiTableHead",e)}f("MuiTableHead",["root"]);const Mo=e=>{const{classes:o}=e;return k({root:["root"]},jo,o)},So=b("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),Do={variant:"head"},te="thead",Ro=p.forwardRef(function(o,t){const s=T({props:o,name:"MuiTableHead"}),{className:i,component:r=te,...l}=s,n={...s,component:r},d=Mo(n);return a.jsx(z.Provider,{value:Do,children:a.jsx(So,{as:r,className:m(d.root,i),ref:t,role:r===te?null:"rowgroup",ownerState:n,...l})})});function $o(e){return C("MuiTableRow",e)}const ae=f("MuiTableRow",["root","selected","hover","head","footer"]),Po=e=>{const{classes:o,selected:t,hover:s,head:i,footer:r}=e;return k({root:["root",t&&"selected",s&&"hover",i&&"head",r&&"footer"]},$o,o)},Ao=b("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,t.head&&o.head,t.footer&&o.footer]}})(B(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${ae.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${ae.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:N(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:N(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}}))),se="tr",X=p.forwardRef(function(o,t){const s=T({props:o,name:"MuiTableRow"}),{className:i,component:r=se,hover:l=!1,selected:n=!1,...d}=s,g=p.useContext(z),y={...s,component:r,hover:l,selected:n,head:g&&g.variant==="head",footer:g&&g.variant==="footer"},w=Po(y);return a.jsx(Ao,{as:r,ref:t,className:m(w.root,i),role:r===se?null:"row",ownerState:y,...d})}),zo=()=>{var j;const e=We(),[o,t]=p.useState([]),[s,i]=p.useState(!0),[r,l]=p.useState(""),[n,d]=p.useState({open:!1,admin:null});p.useEffect(()=>{g()},[]);const g=async()=>{try{i(!0);const c=await Z.getAll();t(c.data),l("")}catch(c){l("Failed to fetch admins. Please check if the backend server is running."),console.error("Error fetching admins:",c)}finally{i(!1)}},y=async c=>{try{await Z.delete(c.id),t(o.filter(v=>v.id!==c.id)),d({open:!1,admin:null})}catch(v){l("Failed to delete admin"),console.error("Error deleting admin:",v)}},w=c=>{e(`/admin/edit/${c.id}`,{state:{admin:c}})},M=c=>{d({open:!0,admin:c})},x=()=>{d({open:!1,admin:null})};return s?a.jsx(q,{title:"Admin Management",children:a.jsx(Be,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:a.jsx(Ne,{})})}):a.jsxs(q,{title:"Admin Management",secondary:a.jsx(L,{variant:"contained",startIcon:a.jsx(Ie,{}),onClick:()=>e("/admin/create"),children:"Add Admin"}),children:[r&&a.jsx(ze,{severity:"error",sx:{mb:2},children:r}),a.jsx(wo,{component:J,children:a.jsxs(po,{children:[a.jsx(Ro,{children:a.jsxs(X,{children:[a.jsx(u,{children:"ID"}),a.jsx(u,{children:"Name"}),a.jsx(u,{children:"Email"}),a.jsx(u,{children:"Role"}),a.jsx(u,{children:"Status"}),a.jsx(u,{children:"Created At"}),a.jsx(u,{align:"center",children:"Actions"})]})}),a.jsx(bo,{children:o.length===0?a.jsx(X,{children:a.jsx(u,{colSpan:7,align:"center",children:a.jsx(Y,{variant:"body2",color:"textSecondary",children:"No admins found. Create your first admin!"})})}):o.map(c=>a.jsxs(X,{children:[a.jsx(u,{children:c.id}),a.jsx(u,{children:c.name}),a.jsx(u,{children:c.email}),a.jsx(u,{children:a.jsx(G,{label:c.role,color:c.role==="super_admin"?"primary":"default",size:"small"})}),a.jsx(u,{children:a.jsx(G,{label:c.is_active?"Active":"Inactive",color:c.is_active?"success":"error",size:"small"})}),a.jsx(u,{children:new Date(c.created_at).toLocaleDateString()}),a.jsxs(u,{align:"center",children:[a.jsx(Q,{color:"primary",onClick:()=>w(c),size:"small",children:a.jsx(Ue,{})}),a.jsx(Q,{color:"error",onClick:()=>M(c),size:"small",children:a.jsx(Fe,{})})]})]},c.id))})]})}),a.jsxs(Je,{open:n.open,onClose:x,children:[a.jsx(no,{children:"Confirm Delete"}),a.jsx(ao,{children:a.jsxs(Y,{children:['Are you sure you want to delete admin "',(j=n.admin)==null?void 0:j.name,'"? This action cannot be undone.']})}),a.jsxs(Ge,{children:[a.jsx(L,{onClick:x,children:"Cancel"}),a.jsx(L,{onClick:()=>y(n.admin),color:"error",variant:"contained",children:"Delete"})]})]})]})};export{zo as default};
