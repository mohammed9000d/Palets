import{u as Q,a as R,r as d,j as e,I as $,G as n,F as J,B as U,A as X,b as Y,L as z,c as Z,S as _,T as p,D as ee}from"./index-B1lwnqt0.js";import{V as se,a as re,C as ne,A as te,b as ae,c as oe}from"./AuthFooter-DzFKqIhU.js";import{A as ie}from"./Alert-u0NGmxlB.js";import{F as B,I as D,O as F,a as W}from"./InputLabel-D3rw_fEJ.js";import{I as le}from"./InputAdornment-VXwk7dN8.js";import{B as ce}from"./Button-Df8HaDE5.js";function de(){const u=Q(),{login:h,loading:g}=R(),[o,M]=d.useState({email:"",password:""}),[T,H]=d.useState(!0),[x,O]=d.useState(!1),[a,l]=d.useState({email:"",password:"",general:""}),[V,w]=d.useState({email:!1,password:!1}),j=s=>s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?"":"Please enter a valid email address":"Email address is required",f=s=>s?s.length<6?"Password must be at least 6 characters long":"":"Password is required",y=(s,t)=>{switch(s){case"email":return j(t);case"password":return f(t);default:return""}},q=()=>{O(!x)},G=s=>{s.preventDefault()},C=s=>{const{name:t,value:i}=s.target;if(M({...o,[t]:i}),V[t]){const m=y(t,i);l(r=>({...r,[t]:m,general:""}))}},b=s=>{const{name:t,value:i}=s.target;w(r=>({...r,[t]:!0}));const m=y(t,i);l(r=>({...r,[t]:m}))},K=async s=>{var v,I,k,L,A,S,E,P;s.preventDefault(),w({email:!0,password:!0});const t=j(o.email),i=f(o.password);if(l({email:t,password:i,general:""}),t||i)return;l({email:"",password:"",general:""});const r=await h(o.email,o.password);if(!r.success){let c=r.message||"Login failed";(v=r.message)!=null&&v.toLowerCase().includes("network error occurred")||(I=r.message)!=null&&I.toLowerCase().includes("invalid")||(k=r.message)!=null&&k.toLowerCase().includes("incorrect")||(L=r.message)!=null&&L.toLowerCase().includes("unauthorized")||(A=r.message)!=null&&A.toLowerCase().includes("credentials")?c="Invalid email or password. Please check your credentials and try again.":(S=r.message)!=null&&S.toLowerCase().includes("network")&&!((E=r.message)!=null&&E.toLowerCase().includes("network error occurred"))?c="Network error. Please check your internet connection and try again.":(P=r.message)!=null&&P.toLowerCase().includes("server")&&(c="Server error. Please try again later or contact support if the problem persists."),l(N=>({...N,general:c}))}};return e.jsxs("form",{onSubmit:K,children:[a.general&&e.jsx(ie,{severity:"error",sx:{mb:2},children:a.general}),e.jsxs(B,{fullWidth:!0,sx:{...u.typography.customInput},error:!!a.email,children:[e.jsx(D,{htmlFor:"outlined-adornment-email-login",children:"Email Address"}),e.jsx(F,{id:"outlined-adornment-email-login",type:"email",value:o.email,name:"email",onChange:C,onBlur:b,label:"Email Address",error:!!a.email}),a.email&&e.jsx(W,{error:!0,children:a.email})]}),e.jsxs(B,{fullWidth:!0,sx:{...u.typography.customInput},error:!!a.password,children:[e.jsx(D,{htmlFor:"outlined-adornment-password-login",children:"Password"}),e.jsx(F,{id:"outlined-adornment-password-login",type:x?"text":"password",value:o.password,name:"password",onChange:C,onBlur:b,error:!!a.password,endAdornment:e.jsx(le,{position:"end",children:e.jsx($,{"aria-label":"toggle password visibility",onClick:q,onMouseDown:G,edge:"end",size:"large",children:x?e.jsx(se,{}):e.jsx(re,{})})}),label:"Password"}),a.password&&e.jsx(W,{error:!0,children:a.password})]}),e.jsx(n,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:e.jsx(n,{children:e.jsx(J,{control:e.jsx(ne,{checked:T,onChange:s=>H(s.target.checked),name:"checked",color:"primary"}),label:"Keep me logged in"})})}),e.jsx(U,{sx:{mt:2},children:e.jsx(X,{children:e.jsx(ce,{color:"secondary",fullWidth:!0,size:"large",type:"submit",variant:"contained",disabled:g||!!a.email||!!a.password||!o.email||!o.password,children:g?"Signing In...":"Sign In"})})})]})}function we(){const u=Y(h=>h.breakpoints.down("md"));return e.jsx(te,{children:e.jsxs(n,{container:!0,direction:"column",sx:{justifyContent:"flex-end",minHeight:"100vh"},children:[e.jsx(n,{size:12,children:e.jsx(n,{container:!0,sx:{justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 68px)"},children:e.jsx(n,{sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(ae,{children:e.jsxs(n,{container:!0,spacing:2,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(n,{sx:{mb:3},children:e.jsx(z,{to:"#","aria-label":"logo",children:e.jsx(Z,{})})}),e.jsx(n,{size:12,children:e.jsx(n,{container:!0,direction:{xs:"column-reverse",md:"row"},sx:{alignItems:"center",justifyContent:"center"},children:e.jsx(n,{children:e.jsxs(_,{spacing:1,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(p,{gutterBottom:!0,variant:u?"h3":"h2",sx:{color:"secondary.main"},children:"Hi, Welcome Back"}),e.jsx(p,{variant:"caption",sx:{fontSize:"16px",textAlign:{xs:"center",md:"inherit"}},children:"Enter your credentials to continue"})]})})})}),e.jsx(n,{size:12,children:e.jsx(de,{})}),e.jsx(n,{size:12,children:e.jsx(ee,{})}),e.jsx(n,{size:12,children:e.jsx(n,{container:!0,direction:"column",sx:{alignItems:"center"},size:12,children:e.jsx(p,{component:z,to:"/register",variant:"subtitle1",sx:{textDecoration:"none"},children:"Don't have an account?"})})})]})})})})}),e.jsx(n,{sx:{px:3,my:3},size:12,children:e.jsx(oe,{})})]})})}export{we as default};
