import{a8 as B,a0 as re,r as l,j as e,M,B as c,a1 as ae,J as se,G as u,a2 as le,N as ne,ah as W,T as n,a3 as T,_ as f,I as v,a4 as N,S as ie}from"./index-DNfr9x4F.js";import{p as y}from"./api-BQFhURCH.js";import{A as oe}from"./Alert-76NRBqFV.js";import{T as ce,S as C}from"./TextField-DKgUwB6G.js";import{I as de}from"./InputAdornment-BdIkfXyw.js";import{I as ue}from"./IconSearch-nN7w9_S7.js";import{F as I,I as b}from"./InputLabel-C2axVWU7.js";import{M as i}from"./MenuItem-D6U65LhZ.js";import{T as he,a as xe,b as ge,c as A,d as r,e as je,D as pe,f as me,g as fe,h as ve}from"./TableRow-6aba_KU0.js";import{I as ye}from"./IconTag-DxkSIVBI.js";import{I as ke}from"./IconPackage-oLjh9KB8.js";import{I as Se}from"./IconStar-nwd44-Gm.js";import{I as _e}from"./IconEye-ClaN6I9X.js";import{I as Ce}from"./IconEdit-CE5Qx0NF.js";import{I as Ie}from"./IconTrash-D5OUtA2T.js";import{B as h}from"./Button-CLm7eKfg.js";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var be=B("outline","package-off","IconPackageOff",[["path",{d:"M8.812 4.793l3.188 -1.793l8 4.5v8.5m-2.282 1.784l-5.718 3.216l-8 -4.5v-9l2.223 -1.25",key:"svg-0"}],["path",{d:"M14.543 10.57l5.457 -3.07",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M16 5.25l-4.35 2.447m-2.564 1.442l-1.086 .611",key:"svg-4"}],["path",{d:"M3 3l18 18",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fe=B("filled","star-filled","IconStarFilled",[["path",{d:"M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z",key:"svg-0"}]]);const He=()=>{var E;const k=re(),[F,$]=l.useState([]),[w,z]=l.useState(!0),[D,x]=l.useState(""),[P,S]=l.useState({open:!1,product:null}),[_,O]=l.useState(""),[g,R]=l.useState("all"),[j,L]=l.useState("all"),[p,G]=l.useState("all"),[H,U]=l.useState([]),[m,V]=l.useState("all"),[a,q]=l.useState({current_page:1,per_page:15,total:0,last_page:1});l.useEffect(()=>{d(),J()},[_,g,j,p,m]);const J=async()=>{try{const t=await y.getCategories();U(t.data.categories||[])}catch(t){console.error("Error fetching categories:",t)}},d=async(t=1)=>{try{z(!0);const s={page:t,per_page:a.per_page,search:_||void 0,status:g==="all"?void 0:g,in_stock:j==="all"?void 0:j==="in_stock",featured:p==="all"?void 0:p==="featured",category:m==="all"?void 0:m},o=await y.getAll(s);$(o.data.data),q({current_page:o.data.current_page,per_page:o.data.per_page,total:o.data.total,last_page:o.data.last_page}),x("")}catch(s){x("Failed to fetch products. Please check if the backend server is running."),console.error("Error fetching products:",s)}finally{z(!1)}},K=async t=>{try{await y.delete(t.slug),d(a.current_page),S({open:!1,product:null})}catch(s){x("Failed to delete product"),console.error("Error deleting product:",s)}},Q=t=>{k(`/products/edit/${t.slug}`)},X=t=>{k(`/products/view/${t.slug}`)},Y=async t=>{try{await y.toggleFeatured(t.slug),d(a.current_page)}catch(s){x("Failed to update featured status"),console.error("Error toggling featured status:",s)}},Z=async t=>{try{await y.toggleStock(t.slug),d(a.current_page)}catch(s){x("Failed to update stock status"),console.error("Error toggling stock status:",s)}},ee=t=>{switch(t){case"published":return"success";case"draft":return"warning";case"archived":return"error";default:return"default"}},te=(t,s=null)=>{const o=`$${parseFloat(t).toFixed(2)}`;return s&&parseFloat(s)<parseFloat(t)?e.jsxs(ie,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(n,{variant:"body2",sx:{textDecoration:"line-through",color:"text.secondary"},children:o}),e.jsxs(n,{variant:"body2",color:"error.main",fontWeight:"bold",children:["$",parseFloat(s).toFixed(2)]})]}):e.jsx(n,{variant:"body2",children:o})};return w&&F.length===0?e.jsx(M,{title:"Products",children:e.jsx(c,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(ae,{})})}):e.jsxs(M,{title:"Products Management",secondary:e.jsx(h,{variant:"contained",startIcon:e.jsx(N,{}),onClick:()=>k("/products/create"),children:"Add Product"}),children:[D&&e.jsx(oe,{severity:"error",sx:{mb:2},children:D}),e.jsx(se,{sx:{p:2,mb:3},children:e.jsxs(u,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(u,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ce,{fullWidth:!0,placeholder:"Search products...",value:_,onChange:t=>O(t.target.value),InputProps:{startAdornment:e.jsx(de,{position:"start",children:e.jsx(ue,{})})},size:"small"})}),e.jsx(u,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(I,{fullWidth:!0,size:"small",children:[e.jsx(b,{children:"Status"}),e.jsxs(C,{value:g,onChange:t=>R(t.target.value),label:"Status",children:[e.jsx(i,{value:"all",children:"All Status"}),e.jsx(i,{value:"published",children:"Published"}),e.jsx(i,{value:"draft",children:"Draft"}),e.jsx(i,{value:"archived",children:"Archived"})]})]})}),e.jsx(u,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(I,{fullWidth:!0,size:"small",children:[e.jsx(b,{children:"Stock"}),e.jsxs(C,{value:j,onChange:t=>L(t.target.value),label:"Stock",children:[e.jsx(i,{value:"all",children:"All"}),e.jsx(i,{value:"in_stock",children:"In Stock"}),e.jsx(i,{value:"out_of_stock",children:"Out of Stock"})]})]})}),e.jsx(u,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(I,{fullWidth:!0,size:"small",children:[e.jsx(b,{children:"Featured"}),e.jsxs(C,{value:p,onChange:t=>G(t.target.value),label:"Featured",children:[e.jsx(i,{value:"all",children:"All"}),e.jsx(i,{value:"featured",children:"Featured"}),e.jsx(i,{value:"not_featured",children:"Not Featured"})]})]})}),e.jsx(u,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(I,{fullWidth:!0,size:"small",children:[e.jsx(b,{children:"Category"}),e.jsxs(C,{value:m,onChange:t=>V(t.target.value),label:"Category",children:[e.jsx(i,{value:"all",children:"All Categories"}),H.map(t=>e.jsx(i,{value:t,children:t},t))]})]})})]})}),e.jsx(he,{component:le,children:e.jsxs(xe,{children:[e.jsx(ge,{children:e.jsxs(A,{children:[e.jsx(r,{children:"Product"}),e.jsx(r,{children:"Category"}),e.jsx(r,{children:"Price"}),e.jsx(r,{children:"Stock"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"Featured"}),e.jsx(r,{children:"Actions"})]})}),e.jsxs(je,{children:[F.map(t=>e.jsxs(A,{hover:!0,children:[e.jsx(r,{children:e.jsxs(c,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(ne,{src:t.cover_photo_thumb_url,sx:{width:60,height:60},variant:"rounded",children:e.jsx(W,{})}),e.jsxs(c,{children:[e.jsx(n,{variant:"subtitle2",fontWeight:"bold",children:t.main_title}),t.sub_title&&e.jsx(n,{variant:"caption",color:"textSecondary",children:t.sub_title}),e.jsx("br",{}),e.jsxs(n,{variant:"caption",color:"textSecondary",children:["SKU: ",t.sku||"N/A"]})]})]})}),e.jsx(r,{children:t.category?e.jsx(T,{label:t.category,size:"small",variant:"outlined",icon:e.jsx(ye,{})}):e.jsx(n,{variant:"caption",color:"textSecondary",children:"No category"})}),e.jsxs(r,{children:[te(t.price,t.discount_price),t.is_on_sale&&e.jsx(T,{label:`${t.discount_percentage}% OFF`,size:"small",color:"error",sx:{ml:1}})]}),e.jsx(r,{children:e.jsxs(c,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(f,{title:t.in_stock?"In Stock":"Out of Stock",children:e.jsx(v,{onClick:()=>Z(t),color:t.in_stock?"success":"error",size:"small",children:t.in_stock?e.jsx(ke,{}):e.jsx(be,{})})}),e.jsx(n,{variant:"caption",children:t.stock_quantity})]})}),e.jsx(r,{children:e.jsx(T,{label:t.status.charAt(0).toUpperCase()+t.status.slice(1),color:ee(t.status),size:"small"})}),e.jsx(r,{children:e.jsx(f,{title:t.is_featured?"Remove from Featured":"Add to Featured",children:e.jsx(v,{onClick:()=>Y(t),color:t.is_featured?"warning":"default",children:t.is_featured?e.jsx(Fe,{}):e.jsx(Se,{})})})}),e.jsx(r,{children:e.jsxs(c,{display:"flex",gap:1,children:[e.jsx(f,{title:"View Product",children:e.jsx(v,{onClick:()=>X(t),color:"info",size:"small",children:e.jsx(_e,{})})}),e.jsx(f,{title:"Edit Product",children:e.jsx(v,{onClick:()=>Q(t),color:"primary",size:"small",children:e.jsx(Ce,{})})}),e.jsx(f,{title:"Delete Product",children:e.jsx(v,{onClick:()=>S({open:!0,product:t}),color:"error",size:"small",children:e.jsx(Ie,{})})})]})})]},t.id)),F.length===0&&!w&&e.jsx(A,{children:e.jsx(r,{colSpan:7,align:"center",children:e.jsxs(c,{py:4,children:[e.jsx(W,{size:48,style:{opacity:.3}}),e.jsx(n,{variant:"h6",color:"textSecondary",mt:2,children:"No products found"}),e.jsx(n,{variant:"body2",color:"textSecondary",children:_||g!=="all"||j!=="all"||p!=="all"||m!=="all"?"Try adjusting your filters":"Start by creating your first product"}),e.jsx(h,{variant:"contained",startIcon:e.jsx(N,{}),onClick:()=>k("/products/create"),sx:{mt:2},children:"Create Product"})]})})})]})]})}),a.last_page>1&&e.jsxs(c,{display:"flex",justifyContent:"center",mt:3,children:[e.jsx(h,{onClick:()=>d(a.current_page-1),disabled:a.current_page===1,sx:{mr:1},children:"Previous"}),e.jsxs(n,{variant:"body2",sx:{mx:2,alignSelf:"center"},children:["Page ",a.current_page," of ",a.last_page,"(",a.total," total products)"]}),e.jsx(h,{onClick:()=>d(a.current_page+1),disabled:a.current_page===a.last_page,sx:{ml:1},children:"Next"})]}),e.jsxs(pe,{open:P.open,onClose:()=>S({open:!1,product:null}),maxWidth:"sm",fullWidth:!0,children:[e.jsx(me,{children:"Confirm Delete"}),e.jsx(fe,{children:e.jsxs(n,{children:['Are you sure you want to delete the product "',(E=P.product)==null?void 0:E.main_title,'"? This action cannot be undone.']})}),e.jsxs(ve,{children:[e.jsx(h,{onClick:()=>S({open:!1,product:null}),color:"inherit",children:"Cancel"}),e.jsx(h,{onClick:()=>K(P.product),color:"error",variant:"contained",children:"Delete"})]})]})]})};export{He as default};
