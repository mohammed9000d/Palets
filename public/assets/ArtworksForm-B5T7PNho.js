import{r as h,ab as ro,ag as Ct,ah as it,ai as so,e as Yt,g as Jt,f as Xt,j as o,s as Y,i as pt,k as dt,l as Qt,p as Pe,h as jt,a2 as Zt,aj as eo,a3 as to,q as Pt,I as Ee,a0 as no,a5 as ao,a6 as io,M as Tt,B as K,a1 as Rt,G as O,J as At,K as St,T as Ke,F as Ft,D as lo}from"./index-DvNQNAw1.js";import{b as co,c as lt}from"./api-m0yHc7N1.js";import{C as uo,A as Et}from"./Alert-Jx1-EQGi.js";import{i as je,o as Mt,F as Nt,I as zt}from"./InputLabel-D0IGXPy6.js";import{A as po,f as Fe,i as Ot,S as Bt,T as me}from"./TextField-CAljsaeA.js";import{M as ct}from"./MenuItem-Dg5wtGAt.js";import{I as fo}from"./InputAdornment-DNft4k1e.js";import{I as go}from"./IconCurrencyDollar-rkNiCi-w.js";import{S as Wt}from"./Switch-DwLl1WQW.js";import{I as ut,a as Vt,b as mo}from"./IconX-CfXWwWIb.js";import{B as Ye}from"./Button-BsbqG4MF.js";const ho=r=>{const a=h.useRef({});return h.useEffect(()=>{a.current=r}),a.current};function Ht(r){return r.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function xo(r={}){const{ignoreAccents:a=!0,ignoreCase:f=!0,limit:d,matchFrom:$="any",stringify:_,trim:j=!1}=r;return(D,{inputValue:B,getOptionLabel:T})=>{let A=j?B.trim():B;f&&(A=A.toLowerCase()),a&&(A=Ht(A));const W=A?D.filter(le=>{let E=(_||T)(le);return f&&(E=E.toLowerCase()),a&&(E=Ht(E)),$==="start"?E.startsWith(A):E.includes(A)}):D;return typeof d=="number"?W.slice(0,d):W}}const bo=xo(),Ut=5,Io=r=>{var a;return r.current!==null&&((a=r.current.parentElement)==null?void 0:a.contains(document.activeElement))},yo=[];function Gt(r,a,f,d){if(a||r==null||d)return"";const $=f(r);return typeof $=="string"?$:""}function vo(r){const{unstable_isActiveElementInListbox:a=Io,unstable_classNamePrefix:f="Mui",autoComplete:d=!1,autoHighlight:$=!1,autoSelect:_=!1,blurOnSelect:j=!1,clearOnBlur:D=!r.freeSolo,clearOnEscape:B=!1,componentName:T="useAutocomplete",defaultValue:A=r.multiple?yo:null,disableClearable:W=!1,disableCloseOnSelect:le=!1,disabled:E,disabledItemsFocusable:Ae=!1,disableListWrap:Se=!1,filterOptions:R=bo,filterSelectedOptions:ce=!1,freeSolo:ue=!1,getOptionDisabled:M,getOptionKey:re,getOptionLabel:pe=t=>t.label??t,groupBy:V,handleHomeEndKeys:he=!r.freeSolo,id:Je,includeInputInList:xe=!1,inputValue:Oe,isOptionEqualToValue:te=(t,e)=>t===e,multiple:c=!1,onChange:Me,onClose:$e,onHighlightChange:be,onInputChange:J,onOpen:we,open:n,openOnFocus:I=!1,options:b,readOnly:g=!1,renderValue:m,selectOnFocus:X=!r.freeSolo,value:se}=r,H=ro(Je);let F=pe;F=t=>{const e=pe(t);return typeof e!="string"?String(e):e};const ke=h.useRef(!1),Ne=h.useRef(!0),w=h.useRef(null),G=h.useRef(null),[ze,wt]=h.useState(null),[U,Xe]=h.useState(-1),ft=$?0:-1,k=h.useRef(ft),kt=h.useRef(Gt(A??se,c,F)).current,[l,Be]=Ct({controlled:se,default:A,name:T}),[y,Ie]=Ct({controlled:Oe,default:kt,name:T,state:"inputValue"}),[Le,Qe]=h.useState(!1),_e=h.useCallback((t,e,s)=>{if(!(c?l.length<e.length:e!==null)&&!D)return;const i=Gt(e,c,F,m);y!==i&&(Ie(i),J&&J(t,i,s))},[F,y,c,J,Ie,D,l,m]),[ne,We]=Ct({controlled:n,default:!1,name:T,state:"open"}),[Lt,De]=h.useState(!0),Ze=!c&&l!=null&&y===F(l),N=ne&&!g,v=N?R(b.filter(t=>!(ce&&(c?l:[l]).some(e=>e!==null&&te(t,e)))),{inputValue:Ze&&Lt?"":y,getOptionLabel:F}):[],Q=ho({filteredOptions:v,value:l,inputValue:y});h.useEffect(()=>{const t=l!==Q.value;Le&&!t||ue&&!t||_e(null,l,"reset")},[l,_e,Le,Q.value,ue]);const et=ne&&v.length>0&&!g,Z=it(t=>{if(t===-1)w.current.focus();else{const e=m?"data-item-index":"data-tag-index";ze.querySelector(`[${e}="${t}"]`).focus()}});h.useEffect(()=>{c&&U>l.length-1&&(Xe(-1),Z(-1))},[l,c,U,Z]);function gt(t,e){if(!G.current||t<0||t>=v.length)return-1;let s=t;for(;;){const p=G.current.querySelector(`[data-option-index="${s}"]`),i=Ae?!1:!p||p.disabled||p.getAttribute("aria-disabled")==="true";if(p&&p.hasAttribute("tabindex")&&!i)return s;if(e==="next"?s=(s+1)%v.length:s=(s-1+v.length)%v.length,s===t)return-1}}const ae=it(({event:t,index:e,reason:s})=>{if(k.current=e,e===-1?w.current.removeAttribute("aria-activedescendant"):w.current.setAttribute("aria-activedescendant",`${H}-option-${e}`),be&&["mouse","keyboard","touch"].includes(s)&&be(t,e===-1?null:v[e],s),!G.current)return;const p=G.current.querySelector(`[role="option"].${f}-focused`);p&&(p.classList.remove(`${f}-focused`),p.classList.remove(`${f}-focusVisible`));let i=G.current;if(G.current.getAttribute("role")!=="listbox"&&(i=G.current.parentElement.querySelector('[role="listbox"]')),!i)return;if(e===-1){i.scrollTop=0;return}const C=G.current.querySelector(`[data-option-index="${e}"]`);if(C&&(C.classList.add(`${f}-focused`),s==="keyboard"&&C.classList.add(`${f}-focusVisible`),i.scrollHeight>i.clientHeight&&s!=="mouse"&&s!=="touch")){const P=C,q=i.clientHeight+i.scrollTop,vt=P.offsetTop+P.offsetHeight;vt>q?i.scrollTop=vt-i.clientHeight:P.offsetTop-P.offsetHeight*(V?1.3:0)<i.scrollTop&&(i.scrollTop=P.offsetTop-P.offsetHeight*(V?1.3:0))}}),ee=it(({event:t,diff:e,direction:s="next",reason:p})=>{if(!N)return;const C=gt((()=>{const P=v.length-1;if(e==="reset")return ft;if(e==="start")return 0;if(e==="end")return P;const q=k.current+e;return q<0?q===-1&&xe?-1:Se&&k.current!==-1||Math.abs(e)>1?0:P:q>P?q===P+1&&xe?-1:Se||Math.abs(e)>1?P:0:q})(),s);if(ae({index:C,reason:p,event:t}),d&&e!=="reset")if(C===-1)w.current.value=y;else{const P=F(v[C]);w.current.value=P,P.toLowerCase().indexOf(y.toLowerCase())===0&&y.length>0&&w.current.setSelectionRange(y.length,P.length)}}),mt=()=>{const t=(e,s)=>{const p=e?F(e):"",i=s?F(s):"";return p===i};if(k.current!==-1&&Q.filteredOptions&&Q.filteredOptions.length!==v.length&&Q.inputValue===y&&(c?l.length===Q.value.length&&Q.value.every((e,s)=>F(l[s])===F(e)):t(Q.value,l))){const e=Q.filteredOptions[k.current];if(e)return v.findIndex(s=>F(s)===F(e))}return-1},Ve=h.useCallback(()=>{if(!N)return;const t=mt();if(t!==-1){k.current=t;return}const e=c?l[0]:l;if(v.length===0||e==null){ee({diff:"reset"});return}if(G.current){if(e!=null){const s=v[k.current];if(c&&s&&l.findIndex(i=>te(s,i))!==-1)return;const p=v.findIndex(i=>te(i,e));p===-1?ee({diff:"reset"}):ae({index:p});return}if(k.current>=v.length-1){ae({index:v.length-1});return}ae({index:k.current})}},[v.length,c?!1:l,ce,ee,ae,N,y,c]),ht=it(t=>{so(G,t),t&&Ve()});h.useEffect(()=>{Ve()},[Ve]);const z=t=>{ne||(We(!0),De(!0),we&&we(t))},ye=(t,e)=>{ne&&(We(!1),$e&&$e(t,e))},ie=(t,e,s,p)=>{if(c){if(l.length===e.length&&l.every((i,C)=>i===e[C]))return}else if(l===e)return;Me&&Me(t,e,s,p),Be(e)},Te=h.useRef(!1),oe=(t,e,s="selectOption",p="options")=>{let i=s,C=e;if(c){C=Array.isArray(l)?l.slice():[];const P=C.findIndex(q=>te(e,q));P===-1?C.push(e):p!=="freeSolo"&&(C.splice(P,1),i="removeOption")}_e(t,C,i),ie(t,C,i,{option:e}),!le&&(!t||!t.ctrlKey&&!t.metaKey)&&ye(t,i),(j===!0||j==="touch"&&Te.current||j==="mouse"&&!Te.current)&&w.current.blur()};function tt(t,e){if(t===-1)return-1;let s=t;for(;;){if(e==="next"&&s===l.length||e==="previous"&&s===-1)return-1;const p=m?"data-item-index":"data-tag-index",i=ze.querySelector(`[${p}="${s}"]`);if(!i||!i.hasAttribute("tabindex")||i.disabled||i.getAttribute("aria-disabled")==="true")s+=e==="next"?1:-1;else return s}}const ot=(t,e)=>{if(!c)return;y===""&&ye(t,"toggleInput");let s=U;U===-1?y===""&&e==="previous"&&(s=l.length-1):(s+=e==="next"?1:-1,s<0&&(s=0),s===l.length&&(s=-1)),s=tt(s,e),Xe(s),Z(s)},ve=t=>{ke.current=!0,Ie(""),J&&J(t,"","clear"),ie(t,c?[]:null,"clear")},xt=t=>e=>{if(t.onKeyDown&&t.onKeyDown(e),!e.defaultMuiPrevented&&(U!==-1&&!["ArrowLeft","ArrowRight"].includes(e.key)&&(Xe(-1),Z(-1)),e.which!==229))switch(e.key){case"Home":N&&he&&(e.preventDefault(),ee({diff:"start",direction:"next",reason:"keyboard",event:e}));break;case"End":N&&he&&(e.preventDefault(),ee({diff:"end",direction:"previous",reason:"keyboard",event:e}));break;case"PageUp":e.preventDefault(),ee({diff:-Ut,direction:"previous",reason:"keyboard",event:e}),z(e);break;case"PageDown":e.preventDefault(),ee({diff:Ut,direction:"next",reason:"keyboard",event:e}),z(e);break;case"ArrowDown":e.preventDefault(),ee({diff:1,direction:"next",reason:"keyboard",event:e}),z(e);break;case"ArrowUp":e.preventDefault(),ee({diff:-1,direction:"previous",reason:"keyboard",event:e}),z(e);break;case"ArrowLeft":!c&&m?Z(0):ot(e,"previous");break;case"ArrowRight":!c&&m?Z(-1):ot(e,"next");break;case"Enter":if(k.current!==-1&&N){const s=v[k.current],p=M?M(s):!1;if(e.preventDefault(),p)return;oe(e,s,"selectOption"),d&&w.current.setSelectionRange(w.current.value.length,w.current.value.length)}else ue&&y!==""&&Ze===!1&&(c&&e.preventDefault(),oe(e,y,"createOption","freeSolo"));break;case"Escape":N?(e.preventDefault(),e.stopPropagation(),ye(e,"escape")):B&&(y!==""||c&&l.length>0||m)&&(e.preventDefault(),e.stopPropagation(),ve(e));break;case"Backspace":if(c&&!g&&y===""&&l.length>0){const s=U===-1?l.length-1:U,p=l.slice();p.splice(s,1),ie(e,p,"removeOption",{option:l[s]})}!c&&m&&!g&&(Be(null),Z(-1));break;case"Delete":if(c&&!g&&y===""&&l.length>0&&U!==-1){const s=U,p=l.slice();p.splice(s,1),ie(e,p,"removeOption",{option:l[s]})}!c&&m&&!g&&(Be(null),Z(-1));break}},bt=t=>{Qe(!0),I&&!ke.current&&z(t)},Ce=t=>{if(a(G)){w.current.focus();return}Qe(!1),Ne.current=!0,ke.current=!1,_&&k.current!==-1&&N?oe(t,v[k.current],"blur"):_&&ue&&y!==""?oe(t,y,"blur","freeSolo"):D&&_e(t,l,"blur"),ye(t,"blur")},He=t=>{const e=t.target.value;y!==e&&(Ie(e),De(!1),J&&J(t,e,"input")),e===""?!W&&!c&&ie(t,null,"clear"):z(t)},Ue=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));k.current!==e&&ae({event:t,index:e,reason:"mouse"})},It=t=>{ae({event:t,index:Number(t.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Te.current=!0},yt=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));oe(t,v[e],"selectOption"),Te.current=!1},rt=t=>e=>{const s=l.slice();s.splice(t,1),ie(e,s,"removeOption",{option:l[t]})},_t=t=>{ie(t,null,"removeOption",{option:l})},Re=t=>{ne?ye(t,"toggleInput"):z(t)},L=t=>{t.currentTarget.contains(t.target)&&t.target.getAttribute("id")!==H&&t.preventDefault()},S=t=>{t.currentTarget.contains(t.target)&&(w.current.focus(),X&&Ne.current&&w.current.selectionEnd-w.current.selectionStart===0&&w.current.select(),Ne.current=!1)},de=t=>{!E&&(y===""||!ne)&&Re(t)};let Ge=ue&&y.length>0;Ge=Ge||(c?l.length>0:l!==null);let st=v;return V&&(st=v.reduce((t,e,s)=>{const p=V(e);return t.length>0&&t[t.length-1].group===p?t[t.length-1].options.push(e):t.push({key:s,index:s,group:p,options:[e]}),t},[])),E&&Le&&Ce(),{getRootProps:(t={})=>({...t,onKeyDown:xt(t),onMouseDown:L,onClick:S}),getInputLabelProps:()=>({id:`${H}-label`,htmlFor:H}),getInputProps:()=>({id:H,value:y,onBlur:Ce,onFocus:bt,onChange:He,onMouseDown:de,"aria-activedescendant":N?"":null,"aria-autocomplete":d?"both":"list","aria-controls":et?`${H}-listbox`:void 0,"aria-expanded":et,autoComplete:"off",ref:w,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:E}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:ve}),getItemProps:({index:t=0}={})=>({...c&&{key:t},...m?{"data-item-index":t}:{"data-tag-index":t},tabIndex:-1,...!g&&{onDelete:c?rt(t):_t}}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Re}),getTagProps:({index:t})=>({key:t,"data-tag-index":t,tabIndex:-1,...!g&&{onDelete:rt(t)}}),getListboxProps:()=>({role:"listbox",id:`${H}-listbox`,"aria-labelledby":`${H}-label`,ref:ht,onMouseDown:t=>{t.preventDefault()}}),getOptionProps:({index:t,option:e})=>{const s=(c?l:[l]).some(i=>i!=null&&te(e,i)),p=M?M(e):!1;return{key:(re==null?void 0:re(e))??F(e),tabIndex:-1,role:"option",id:`${H}-option-${t}`,onMouseMove:Ue,onClick:yt,onTouchStart:It,"data-option-index":t,"aria-disabled":p,"aria-selected":s}},id:H,inputValue:y,value:l,dirty:Ge,expanded:N&&ze,popupOpen:N,focused:Le||U!==-1,anchorEl:ze,setAnchorEl:wt,focusedItem:U,focusedTag:U,groupedOptions:st}}function Co(r){return Yt("MuiListSubheader",r)}Jt("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const jo=r=>{const{classes:a,color:f,disableGutters:d,inset:$,disableSticky:_}=r,j={root:["root",f!=="default"&&`color${dt(f)}`,!d&&"gutters",$&&"inset",!_&&"sticky"]};return Qt(j,Co,a)},Po=Y("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:f}=r;return[a.root,f.color!=="default"&&a[`color${dt(f.color)}`],!f.disableGutters&&a.gutters,f.inset&&a.inset,!f.disableSticky&&a.sticky]}})(Pe(({theme:r})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(r.vars||r).palette.text.secondary,fontFamily:r.typography.fontFamily,fontWeight:r.typography.fontWeightMedium,fontSize:r.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(r.vars||r).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:a})=>!a.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:a})=>a.inset,style:{paddingLeft:72}},{props:({ownerState:a})=>!a.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(r.vars||r).palette.background.paper}}]}))),$t=h.forwardRef(function(a,f){const d=Xt({props:a,name:"MuiListSubheader"}),{className:$,color:_="default",component:j="li",disableGutters:D=!1,disableSticky:B=!1,inset:T=!1,...A}=d,W={...d,color:_,component:j,disableGutters:D,disableSticky:B,inset:T},le=jo(W);return o.jsx(Po,{as:j,className:pt(le.root,$),ref:f,ownerState:W,...A})});$t&&($t.muiSkipListHighlight=!0);function Ao(r){return Yt("MuiAutocomplete",r)}const u=Jt("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var qt,Kt;const So=r=>{const{classes:a,disablePortal:f,expanded:d,focused:$,fullWidth:_,hasClearIcon:j,hasPopupIcon:D,inputFocused:B,popupOpen:T,size:A}=r,W={root:["root",d&&"expanded",$&&"focused",_&&"fullWidth",j&&"hasClearIcon",D&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",B&&"inputFocused"],tag:["tag",`tagSize${dt(A)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",T&&"popupIndicatorOpen"],popper:["popper",f&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return Qt(W,Ao,a)},Oo=Y("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(r,a)=>{const{ownerState:f}=r,{fullWidth:d,hasClearIcon:$,hasPopupIcon:_,inputFocused:j,size:D}=f;return[{[`& .${u.tag}`]:a.tag},{[`& .${u.tag}`]:a[`tagSize${dt(D)}`]},{[`& .${u.inputRoot}`]:a.inputRoot},{[`& .${u.input}`]:a.input},{[`& .${u.input}`]:j&&a.inputFocused},a.root,d&&a.fullWidth,_&&a.hasPopupIcon,$&&a.hasClearIcon]}})({[`&.${u.focused} .${u.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${u.clearIndicator}`]:{visibility:"visible"}},[`& .${u.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${u.inputRoot}`]:{[`.${u.hasPopupIcon}&, .${u.hasClearIcon}&`]:{paddingRight:30},[`.${u.hasPopupIcon}.${u.hasClearIcon}&`]:{paddingRight:56},[`& .${u.input}`]:{width:0,minWidth:30}},[`& .${Ot.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Ot.root}.${je.sizeSmall}`]:{[`& .${Ot.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Mt.root}`]:{padding:9,[`.${u.hasPopupIcon}&, .${u.hasClearIcon}&`]:{paddingRight:39},[`.${u.hasPopupIcon}.${u.hasClearIcon}&`]:{paddingRight:65},[`& .${u.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${u.endAdornment}`]:{right:9}},[`& .${Mt.root}.${je.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${u.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Fe.root}`]:{paddingTop:19,paddingLeft:8,[`.${u.hasPopupIcon}&, .${u.hasClearIcon}&`]:{paddingRight:39},[`.${u.hasPopupIcon}.${u.hasClearIcon}&`]:{paddingRight:65},[`& .${Fe.input}`]:{padding:"7px 4px"},[`& .${u.endAdornment}`]:{right:9}},[`& .${Fe.root}.${je.sizeSmall}`]:{paddingBottom:1,[`& .${Fe.input}`]:{padding:"2.5px 4px"}},[`& .${je.hiddenLabel}`]:{paddingTop:8},[`& .${Fe.root}.${je.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${u.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Fe.root}.${je.hiddenLabel}.${je.sizeSmall}`]:{[`& .${u.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${u.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${u.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${u.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${u.inputRoot}`]:{flexWrap:"wrap"}}}]}),$o=Y("div",{name:"MuiAutocomplete",slot:"EndAdornment"})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),wo=Y(Ee,{name:"MuiAutocomplete",slot:"ClearIndicator"})({marginRight:-2,padding:4,visibility:"hidden"}),ko=Y(Ee,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(r,a)=>{const{ownerState:f}=r;return[a.popupIndicator,f.popupOpen&&a.popupIndicatorOpen]}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),Lo=Y(eo,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(r,a)=>{const{ownerState:f}=r;return[{[`& .${u.option}`]:a.option},a.popper,f.disablePortal&&a.popperDisablePortal]}})(Pe(({theme:r})=>({zIndex:(r.vars||r).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}))),_o=Y(Zt,{name:"MuiAutocomplete",slot:"Paper"})(Pe(({theme:r})=>({...r.typography.body1,overflow:"auto"}))),Do=Y("div",{name:"MuiAutocomplete",slot:"Loading"})(Pe(({theme:r})=>({color:(r.vars||r).palette.text.secondary,padding:"14px 16px"}))),To=Y("div",{name:"MuiAutocomplete",slot:"NoOptions"})(Pe(({theme:r})=>({color:(r.vars||r).palette.text.secondary,padding:"14px 16px"}))),Ro=Y("ul",{name:"MuiAutocomplete",slot:"Listbox"})(Pe(({theme:r})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${u.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[r.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${u.focused}`]:{backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(r.vars||r).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${u.focusVisible}`]:{backgroundColor:(r.vars||r).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / ${r.vars.palette.action.selectedOpacity})`:Pt(r.palette.primary.main,r.palette.action.selectedOpacity),[`&.${u.focused}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.hoverOpacity}))`:Pt(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(r.vars||r).palette.action.selected}},[`&.${u.focusVisible}`]:{backgroundColor:r.vars?`rgba(${r.vars.palette.primary.mainChannel} / calc(${r.vars.palette.action.selectedOpacity} + ${r.vars.palette.action.focusOpacity}))`:Pt(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}}}}))),Fo=Y($t,{name:"MuiAutocomplete",slot:"GroupLabel"})(Pe(({theme:r})=>({backgroundColor:(r.vars||r).palette.background.paper,top:-8}))),Eo=Y("ul",{name:"MuiAutocomplete",slot:"GroupUl"})({padding:0,[`& .${u.option}`]:{paddingLeft:24}}),Mo=h.forwardRef(function(a,f){const d=Xt({props:a,name:"MuiAutocomplete"}),{autoComplete:$=!1,autoHighlight:_=!1,autoSelect:j=!1,blurOnSelect:D=!1,ChipProps:B,className:T,clearIcon:A=qt||(qt=o.jsx(uo,{fontSize:"small"})),clearOnBlur:W=!d.freeSolo,clearOnEscape:le=!1,clearText:E="Clear",closeText:Ae="Close",componentsProps:Se,defaultValue:R=d.multiple?[]:null,disableClearable:ce=!1,disableCloseOnSelect:ue=!1,disabled:M=!1,disabledItemsFocusable:re=!1,disableListWrap:pe=!1,disablePortal:V=!1,filterOptions:he,filterSelectedOptions:Je=!1,forcePopupIcon:xe="auto",freeSolo:Oe=!1,fullWidth:te=!1,getLimitTagsText:c=x=>`+${x}`,getOptionDisabled:Me,getOptionKey:$e,getOptionLabel:be,isOptionEqualToValue:J,groupBy:we,handleHomeEndKeys:n=!d.freeSolo,id:I,includeInputInList:b=!1,inputValue:g,limitTags:m=-1,ListboxComponent:X,ListboxProps:se,loading:H=!1,loadingText:F="Loadingâ€¦",multiple:ke=!1,noOptionsText:Ne="No options",onChange:w,onClose:G,onHighlightChange:ze,onInputChange:wt,onOpen:U,open:Xe,openOnFocus:ft=!1,openText:k="Open",options:kt,PaperComponent:l,PopperComponent:Be,popupIcon:y=Kt||(Kt=o.jsx(po,{})),readOnly:Ie=!1,renderGroup:Le,renderInput:Qe,renderOption:_e,renderTags:ne,renderValue:We,selectOnFocus:Lt=!d.freeSolo,size:De="medium",slots:Ze={},slotProps:N={},value:v,...Q}=d,{getRootProps:et,getInputProps:Z,getInputLabelProps:gt,getPopupIndicatorProps:ae,getClearProps:ee,getItemProps:mt,getListboxProps:Ve,getOptionProps:ht,value:z,dirty:ye,expanded:ie,id:Te,popupOpen:oe,focused:tt,focusedItem:ot,anchorEl:ve,setAnchorEl:xt,inputValue:bt,groupedOptions:Ce}=vo({...d,componentName:"Autocomplete"}),He=!ce&&!M&&ye&&!Ie,Ue=(!Oe||xe===!0)&&xe!==!1,{onMouseDown:It}=Z(),{ref:yt,...rt}=Ve(),Re=be||(x=>x.label??x),L={...d,disablePortal:V,expanded:ie,focused:tt,fullWidth:te,getOptionLabel:Re,hasClearIcon:He,hasPopupIcon:Ue,inputFocused:ot===-1,popupOpen:oe,size:De},S=So(L),de={slots:{paper:l,popper:Be,...Ze},slotProps:{chip:B,listbox:se,...Se,...N}},[Ge,st]=jt("listbox",{elementType:Ro,externalForwardedProps:de,ownerState:L,className:S.listbox,additionalProps:rt,ref:yt}),[t,e]=jt("paper",{elementType:Zt,externalForwardedProps:de,ownerState:L,className:S.paper}),[s,p]=jt("popper",{elementType:eo,externalForwardedProps:de,ownerState:L,className:S.popper,additionalProps:{disablePortal:V,style:{width:ve?ve.clientWidth:null},role:"presentation",anchorEl:ve,open:oe}});let i;const C=x=>({className:S.tag,disabled:M,...mt(x)});if(ne&&ke&&z.length>0?i=ne(z,C,L):We&&z?i=We(z,C,L):ke&&z.length>0&&(i=z.map((x,fe)=>{const{key:ge,...qe}=C({index:fe});return o.jsx(to,{label:Re(x),size:De,...qe,...de.slotProps.chip},ge)})),m>-1&&Array.isArray(i)){const x=i.length-m;!tt&&x>0&&(i=i.splice(0,m),i.push(o.jsx("span",{className:S.tag,children:c(x)},i.length)))}const q=Le||(x=>o.jsxs("li",{children:[o.jsx(Fo,{className:S.groupLabel,ownerState:L,component:"div",children:x.group}),o.jsx(Eo,{className:S.groupUl,ownerState:L,children:x.children})]},x.key)),oo=_e||((x,fe)=>{const{key:ge,...qe}=x;return o.jsx("li",{...qe,children:Re(fe)},ge)}),Dt=(x,fe)=>{const ge=ht({option:x,index:fe});return oo({...ge,className:S.option},x,{selected:ge["aria-selected"],index:fe,inputValue:bt},L)},nt=de.slotProps.clearIndicator,at=de.slotProps.popupIndicator;return o.jsxs(h.Fragment,{children:[o.jsx(Oo,{ref:f,className:pt(S.root,T),ownerState:L,...et(Q),children:Qe({id:Te,disabled:M,fullWidth:!0,size:De==="small"?"small":void 0,InputLabelProps:gt(),InputProps:{ref:xt,className:S.inputRoot,startAdornment:i,onMouseDown:x=>{x.target===x.currentTarget&&It(x)},...(He||Ue)&&{endAdornment:o.jsxs($o,{className:S.endAdornment,ownerState:L,children:[He?o.jsx(wo,{...ee(),"aria-label":E,title:E,ownerState:L,...nt,className:pt(S.clearIndicator,nt==null?void 0:nt.className),children:A}):null,Ue?o.jsx(ko,{...ae(),disabled:M,"aria-label":oe?Ae:k,title:oe?Ae:k,ownerState:L,...at,className:pt(S.popupIndicator,at==null?void 0:at.className),children:y}):null]})}},inputProps:{className:S.input,disabled:M,readOnly:Ie,...Z()}})}),ve?o.jsx(Lo,{as:s,...p,children:o.jsxs(_o,{as:t,...e,children:[H&&Ce.length===0?o.jsx(Do,{className:S.loading,ownerState:L,children:F}):null,Ce.length===0&&!Oe&&!H?o.jsx(To,{className:S.noOptions,ownerState:L,role:"presentation",onMouseDown:x=>{x.preventDefault()},children:Ne}):null,Ce.length>0?o.jsx(Ge,{as:X,...st,children:Ce.map((x,fe)=>we?q({key:x.key,group:x.group,children:x.options.map((ge,qe)=>Dt(ge,x.index+qe))}):Dt(x,fe))}):null]})}):null]})}),Jo=()=>{const r=no(),{slug:a}=ao(),f=io(),d=!!a,[$,_]=h.useState(!1),[j,D]=h.useState(!1),[B,T]=h.useState(""),[A,W]=h.useState(""),[le,E]=h.useState([]),[Ae,Se]=h.useState([]),[R,ce]=h.useState({artist_id:"",title:"",overview:"",description:"",status:"draft",year_created:"",medium:"",dimensions:"",price:"",is_for_sale:!1,is_featured:!1,tags:[]}),[ue,M]=h.useState({cover_image:null,images:[]}),[re,pe]=h.useState({cover_image:null,images:[]}),[V,he]=h.useState({cover_image:null,images:[]});h.useEffect(()=>{var n;Je(),xe(),d&&((n=f.state)!=null&&n.artwork?te(f.state.artwork):Oe())},[d,a]);const Je=async()=>{try{const n=await co.getAll();E(n.data.data||[])}catch(n){console.error("Error fetching artists:",n)}},xe=async()=>{try{const n=await lt.getTags();Se(n.data.tags||[])}catch(n){console.error("Error fetching tags:",n)}},Oe=async()=>{try{_(!0);const n=await lt.getBySlug(a);te(n.data.work)}catch(n){T("Failed to fetch artwork data"),console.error("Error fetching artwork:",n)}finally{_(!1)}},te=n=>{ce({artist_id:n.artist_id||"",title:n.title||"",overview:n.overview||"",description:n.description||"",status:n.status||"draft",year_created:n.year_created||"",medium:n.medium||"",dimensions:n.dimensions||"",price:n.price||"",is_for_sale:n.is_for_sale||!1,is_featured:n.is_featured||!1,tags:n.tags||[]}),he({cover_image:n.cover_image_url?{url:n.cover_image_url,thumb:n.cover_image_thumb_url}:null,images:n.image_urls||[]})},c=n=>{const{name:I,value:b,type:g,checked:m}=n.target;ce(X=>({...X,[I]:g==="checkbox"?m:b}))},Me=(n,I)=>{ce(b=>({...b,tags:I}))},$e=(n,I)=>{const b=Array.from(n.target.files);if(I==="cover_image"){const g=b[0];if(g){M(X=>({...X,cover_image:g}));const m=new FileReader;m.onload=X=>{pe(se=>({...se,cover_image:X.target.result}))},m.readAsDataURL(g)}}else I==="images"&&(M(g=>({...g,images:[...g.images,...b]})),b.forEach(g=>{const m=new FileReader;m.onload=X=>{pe(se=>({...se,images:[...se.images,X.target.result]}))},m.readAsDataURL(g)}))},be=(n,I)=>{n==="cover_image"?(M(b=>({...b,cover_image:null})),pe(b=>({...b,cover_image:null}))):n==="images"&&(M(b=>({...b,images:b.images.filter((g,m)=>m!==I)})),pe(b=>({...b,images:b.images.filter((g,m)=>m!==I)})))},J=(n,I)=>{n==="cover_image"?he(b=>({...b,cover_image:null})):n==="images"&&he(b=>({...b,images:b.images.filter((g,m)=>m!==I)}))},we=async n=>{var I,b;n.preventDefault(),D(!0),T(""),W("");try{const g={...R,...ue};d&&(V.cover_image||(g.remove_cover_image=!0));let m;d?m=await lt.update(a,g):m=await lt.create(g),W(`Artwork ${d?"updated":"created"} successfully!`),setTimeout(()=>{r("/admin/artworks")},2e3)}catch(g){if((b=(I=g.response)==null?void 0:I.data)!=null&&b.errors){const m=Object.values(g.response.data.errors).flat();T(m.join(", "))}else T(`Failed to ${d?"update":"create"} artwork`);console.error("Error submitting form:",g)}finally{D(!1)}};return $?o.jsx(Tt,{title:d?"Edit Artwork":"Create Artwork",children:o.jsx(K,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:o.jsx(Rt,{})})}):o.jsxs(Tt,{title:d?"Edit Artwork":"Create New Artwork",secondary:o.jsx(Ye,{startIcon:o.jsx(mo,{}),onClick:()=>r("/admin/artworks"),children:"Back to Artworks"}),children:[B&&o.jsx(Et,{severity:"error",sx:{mb:2},children:B}),A&&o.jsx(Et,{severity:"success",sx:{mb:2},children:A}),o.jsx("form",{onSubmit:we,children:o.jsxs(O,{container:!0,spacing:3,children:[o.jsx(O,{item:!0,xs:12,children:o.jsx(At,{children:o.jsxs(St,{children:[o.jsx(Ke,{variant:"h6",gutterBottom:!0,children:"Basic Information"}),o.jsxs(O,{container:!0,spacing:2,children:[o.jsx(O,{item:!0,xs:12,sm:6,children:o.jsxs(Nt,{fullWidth:!0,required:!0,children:[o.jsx(zt,{children:"Artist"}),o.jsx(Bt,{name:"artist_id",value:R.artist_id,onChange:c,label:"Artist",children:le.map(n=>o.jsx(ct,{value:n.id,children:n.artist_name},n.id))})]})}),o.jsx(O,{item:!0,xs:12,sm:6,children:o.jsxs(Nt,{fullWidth:!0,children:[o.jsx(zt,{children:"Status"}),o.jsxs(Bt,{name:"status",value:R.status,onChange:c,label:"Status",children:[o.jsx(ct,{value:"draft",children:"Draft"}),o.jsx(ct,{value:"published",children:"Published"}),o.jsx(ct,{value:"archived",children:"Archived"})]})]})}),o.jsx(O,{item:!0,xs:12,children:o.jsx(me,{fullWidth:!0,label:"Title",name:"title",value:R.title,onChange:c,required:!0})}),o.jsx(O,{item:!0,xs:12,children:o.jsx(me,{fullWidth:!0,label:"Overview",name:"overview",value:R.overview,onChange:c,multiline:!0,rows:2,helperText:"Brief description for listings"})}),o.jsx(O,{item:!0,xs:12,children:o.jsx(me,{fullWidth:!0,label:"Description",name:"description",value:R.description,onChange:c,multiline:!0,rows:4,helperText:"Detailed description"})}),o.jsx(O,{item:!0,xs:12,children:o.jsx(Mo,{multiple:!0,options:Ae,freeSolo:!0,value:R.tags,onChange:Me,renderTags:(n,I)=>n.map((b,g)=>h.createElement(to,{variant:"outlined",label:b,...I({index:g}),key:g})),renderInput:n=>o.jsx(me,{...n,label:"Tags",placeholder:"Add tags...",helperText:"Press Enter to add new tags"})})})]})]})})}),o.jsx(O,{item:!0,xs:12,children:o.jsx(At,{children:o.jsxs(St,{children:[o.jsx(Ke,{variant:"h6",gutterBottom:!0,children:"Artwork Details"}),o.jsxs(O,{container:!0,spacing:2,children:[o.jsx(O,{item:!0,xs:12,sm:6,children:o.jsx(me,{fullWidth:!0,label:"Year Created",name:"year_created",type:"number",value:R.year_created,onChange:c,inputProps:{min:1e3,max:new Date().getFullYear()}})}),o.jsx(O,{item:!0,xs:12,sm:6,children:o.jsx(me,{fullWidth:!0,label:"Medium",name:"medium",value:R.medium,onChange:c,placeholder:"e.g., Oil on canvas, Digital art, Watercolor"})}),o.jsx(O,{item:!0,xs:12,sm:6,children:o.jsx(me,{fullWidth:!0,label:"Dimensions",name:"dimensions",value:R.dimensions,onChange:c,placeholder:"e.g., 24x36 inches, 60x90 cm"})}),o.jsx(O,{item:!0,xs:12,sm:6,children:o.jsx(me,{fullWidth:!0,label:"Price",name:"price",type:"number",value:R.price,onChange:c,InputProps:{startAdornment:o.jsx(fo,{position:"start",children:o.jsx(go,{size:20})})}})}),o.jsx(O,{item:!0,xs:12,children:o.jsxs(K,{display:"flex",gap:3,children:[o.jsx(Ft,{control:o.jsx(Wt,{checked:R.is_for_sale,onChange:c,name:"is_for_sale"}),label:"Available for Sale"}),o.jsx(Ft,{control:o.jsx(Wt,{checked:R.is_featured,onChange:c,name:"is_featured"}),label:"Featured Artwork"})]})})]})]})})}),o.jsx(O,{item:!0,xs:12,children:o.jsx(At,{children:o.jsxs(St,{children:[o.jsx(Ke,{variant:"h6",gutterBottom:!0,children:"Images"}),o.jsxs(K,{mb:3,children:[o.jsx(Ke,{variant:"subtitle1",gutterBottom:!0,children:"Cover Image"}),o.jsxs(K,{display:"flex",alignItems:"center",gap:2,mb:2,children:[V.cover_image&&o.jsxs(K,{position:"relative",children:[o.jsx("img",{src:V.cover_image.thumb,alt:"Current cover",style:{width:100,height:100,objectFit:"cover",borderRadius:4}}),o.jsx(Ee,{size:"small",color:"error",sx:{position:"absolute",top:-8,right:-8},onClick:()=>J("cover_image"),children:o.jsx(ut,{size:16})})]}),re.cover_image&&o.jsxs(K,{position:"relative",children:[o.jsx("img",{src:re.cover_image,alt:"New cover",style:{width:100,height:100,objectFit:"cover",borderRadius:4}}),o.jsx(Ee,{size:"small",color:"error",sx:{position:"absolute",top:-8,right:-8},onClick:()=>be("cover_image"),children:o.jsx(ut,{size:16})})]})]}),o.jsx("input",{type:"file",accept:"image/*",onChange:n=>$e(n,"cover_image"),style:{display:"none"},id:"cover-upload"}),o.jsx("label",{htmlFor:"cover-upload",children:o.jsx(Ye,{variant:"outlined",component:"span",startIcon:o.jsx(Vt,{}),children:"Upload Cover Image"})})]}),o.jsx(lo,{sx:{my:2}}),o.jsxs(K,{children:[o.jsx(Ke,{variant:"subtitle1",gutterBottom:!0,children:"Additional Images"}),V.images.length>0&&o.jsx(K,{display:"flex",flexWrap:"wrap",gap:1,mb:2,children:V.images.map((n,I)=>o.jsxs(K,{position:"relative",children:[o.jsx("img",{src:n.thumb,alt:`Existing ${I}`,style:{width:80,height:80,objectFit:"cover",borderRadius:4}}),o.jsx(Ee,{size:"small",color:"error",sx:{position:"absolute",top:-8,right:-8},onClick:()=>J("images",I),children:o.jsx(ut,{size:16})})]},I))}),re.images.length>0&&o.jsx(K,{display:"flex",flexWrap:"wrap",gap:1,mb:2,children:re.images.map((n,I)=>o.jsxs(K,{position:"relative",children:[o.jsx("img",{src:n,alt:`Preview ${I}`,style:{width:80,height:80,objectFit:"cover",borderRadius:4}}),o.jsx(Ee,{size:"small",color:"error",sx:{position:"absolute",top:-8,right:-8},onClick:()=>be("images",I),children:o.jsx(ut,{size:16})})]},I))}),o.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:n=>$e(n,"images"),style:{display:"none"},id:"images-upload"}),o.jsx("label",{htmlFor:"images-upload",children:o.jsx(Ye,{variant:"outlined",component:"span",startIcon:o.jsx(Vt,{}),children:"Add More Images"})})]})]})})}),o.jsx(O,{item:!0,xs:12,children:o.jsxs(K,{display:"flex",justifyContent:"flex-end",gap:2,children:[o.jsx(Ye,{variant:"outlined",onClick:()=>r("/admin/artworks"),disabled:j,children:"Cancel"}),o.jsx(Ye,{type:"submit",variant:"contained",disabled:j,startIcon:j?o.jsx(Rt,{size:20}):null,children:j?`${d?"Updating":"Creating"}...`:`${d?"Update":"Create"} Artwork`})]})})]})})]})};export{Jo as default};
