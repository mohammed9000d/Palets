import{u as q,a as G,r as c,j as e,I as K,G as r,F as N,B as Q,A as R,b as $,L as S,c as J,S as U,T as p,D as X}from"./index-PTmjIff7.js";import{I as Y,V as Z,a as _,C as ee,A as se,b as re,c as ne}from"./AuthFooter-BtBVopaW.js";import{A as te}from"./Alert-pBNezdX5.js";import{F as E,I as P,O as L,a as B}from"./InputLabel-BZr_D059.js";import{B as ae}from"./Button-b82AmWLn.js";function oe(){const d=q(),{login:h,loading:g}=G(),[o,D]=c.useState({email:"",password:""}),[z,F]=c.useState(!0),[x,W]=c.useState(!1),[t,l]=c.useState({email:"",password:"",general:""}),[M,j]=c.useState({email:!1,password:!1}),w=s=>s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?"":"Please enter a valid email address":"Email address is required",f=s=>s?s.length<6?"Password must be at least 6 characters long":"":"Password is required",y=(s,n)=>{switch(s){case"email":return w(n);case"password":return f(n);default:return""}},T=()=>{W(!x)},H=s=>{s.preventDefault()},b=s=>{const{name:n,value:i}=s.target;if(D({...o,[n]:i}),M[n]){const u=y(n,i);l(a=>({...a,[n]:u,general:""}))}},v=s=>{const{name:n,value:i}=s.target;j(a=>({...a,[n]:!0}));const u=y(n,i);l(a=>({...a,[n]:u}))},O=async s=>{var C,I,k,A;s.preventDefault(),j({email:!0,password:!0});const n=w(o.email),i=f(o.password);if(l({email:n,password:i,general:""}),n||i)return;l({email:"",password:"",general:""});const a=await h(o.email,o.password);if(!a.success){let m=a.message||"Login failed";(C=a.message)!=null&&C.toLowerCase().includes("invalid")||(I=a.message)!=null&&I.toLowerCase().includes("incorrect")?m="Invalid email or password. Please check your credentials and try again.":(k=a.message)!=null&&k.toLowerCase().includes("network")?m="Network error. Please check your internet connection and try again.":(A=a.message)!=null&&A.toLowerCase().includes("server")&&(m="Server error. Please try again later or contact support if the problem persists."),l(V=>({...V,general:m}))}};return e.jsxs("form",{onSubmit:O,children:[t.general&&e.jsx(te,{severity:"error",sx:{mb:2},children:t.general}),e.jsxs(E,{fullWidth:!0,sx:{...d.typography.customInput},error:!!t.email,children:[e.jsx(P,{htmlFor:"outlined-adornment-email-login",children:"Email Address"}),e.jsx(L,{id:"outlined-adornment-email-login",type:"email",value:o.email,name:"email",onChange:b,onBlur:v,label:"Email Address",error:!!t.email}),t.email&&e.jsx(B,{error:!0,children:t.email})]}),e.jsxs(E,{fullWidth:!0,sx:{...d.typography.customInput},error:!!t.password,children:[e.jsx(P,{htmlFor:"outlined-adornment-password-login",children:"Password"}),e.jsx(L,{id:"outlined-adornment-password-login",type:x?"text":"password",value:o.password,name:"password",onChange:b,onBlur:v,error:!!t.password,endAdornment:e.jsx(Y,{position:"end",children:e.jsx(K,{"aria-label":"toggle password visibility",onClick:T,onMouseDown:H,edge:"end",size:"large",children:x?e.jsx(Z,{}):e.jsx(_,{})})}),label:"Password"}),t.password&&e.jsx(B,{error:!0,children:t.password})]}),e.jsx(r,{container:!0,sx:{alignItems:"center",justifyContent:"space-between"},children:e.jsx(r,{children:e.jsx(N,{control:e.jsx(ee,{checked:z,onChange:s=>F(s.target.checked),name:"checked",color:"primary"}),label:"Keep me logged in"})})}),e.jsx(Q,{sx:{mt:2},children:e.jsx(R,{children:e.jsx(ae,{color:"secondary",fullWidth:!0,size:"large",type:"submit",variant:"contained",disabled:g||!!t.email||!!t.password||!o.email||!o.password,children:g?"Signing In...":"Sign In"})})})]})}function me(){const d=$(h=>h.breakpoints.down("md"));return e.jsx(se,{children:e.jsxs(r,{container:!0,direction:"column",sx:{justifyContent:"flex-end",minHeight:"100vh"},children:[e.jsx(r,{size:12,children:e.jsx(r,{container:!0,sx:{justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 68px)"},children:e.jsx(r,{sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(re,{children:e.jsxs(r,{container:!0,spacing:2,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(r,{sx:{mb:3},children:e.jsx(S,{to:"#","aria-label":"logo",children:e.jsx(J,{})})}),e.jsx(r,{size:12,children:e.jsx(r,{container:!0,direction:{xs:"column-reverse",md:"row"},sx:{alignItems:"center",justifyContent:"center"},children:e.jsx(r,{children:e.jsxs(U,{spacing:1,sx:{alignItems:"center",justifyContent:"center"},children:[e.jsx(p,{gutterBottom:!0,variant:d?"h3":"h2",sx:{color:"secondary.main"},children:"Hi, Welcome Back"}),e.jsx(p,{variant:"caption",sx:{fontSize:"16px",textAlign:{xs:"center",md:"inherit"}},children:"Enter your credentials to continue"})]})})})}),e.jsx(r,{size:12,children:e.jsx(oe,{})}),e.jsx(r,{size:12,children:e.jsx(X,{})}),e.jsx(r,{size:12,children:e.jsx(r,{container:!0,direction:"column",sx:{alignItems:"center"},size:12,children:e.jsx(p,{component:S,to:"/register",variant:"subtitle1",sx:{textDecoration:"none"},children:"Don't have an account?"})})})]})})})})}),e.jsx(r,{sx:{px:3,my:3},size:12,children:e.jsx(ne,{})})]})})}export{me as default};
