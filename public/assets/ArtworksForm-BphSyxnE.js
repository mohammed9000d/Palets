import{r as b,ac as Kt,ad as yt,ae as rt,af as Yt,e as zt,g as Vt,f as Wt,j as n,s as K,i as it,k as lt,l as Ht,p as Ce,h as It,a2 as Bt,ag as Gt,a3 as Ut,q as vt,I as Ge,a0 as Jt,a5 as Qt,M as Xt,B as W,T as at,F as Lt,a1 as Zt}from"./index-DNfr9x4F.js";import{b as eo,c as nt}from"./api-BQFhURCH.js";import{C as to,A as jt}from"./Alert-76NRBqFV.js";import{A as oo,f as je,i as Ct,T as fe}from"./TextField-DKgUwB6G.js";import{i as ve,o as Tt}from"./InputLabel-C2axVWU7.js";import{B as st}from"./Button-CLm7eKfg.js";import{I as Pt}from"./IconTrash-D5OUtA2T.js";import{S as _t}from"./Switch-dGSHYd5q.js";const ro=o=>{const i=b.useRef({});return b.useEffect(()=>{i.current=o}),i.current};function Rt(o){return o.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function ao(o={}){const{ignoreAccents:i=!0,ignoreCase:d=!0,limit:u,matchFrom:P="any",stringify:D,trim:A=!1}=o;return(F,{inputValue:N,getOptionLabel:E})=>{let S=A?N.trim():N;d&&(S=S.toLowerCase()),i&&(S=Rt(S));const H=S?F.filter(te=>{let y=(D||E)(te);return d&&(y=y.toLowerCase()),i&&(y=Rt(y)),P==="start"?y.startsWith(S):y.includes(S)}):F;return typeof u=="number"?H.slice(0,u):H}}const no=ao(),Dt=5,so=o=>{var i;return o.current!==null&&((i=o.current.parentElement)==null?void 0:i.contains(document.activeElement))},io=[];function Ft(o,i,d,u){if(i||o==null||u)return"";const P=d(o);return typeof P=="string"?P:""}function lo(o){const{unstable_isActiveElementInListbox:i=so,unstable_classNamePrefix:d="Mui",autoComplete:u=!1,autoHighlight:P=!1,autoSelect:D=!1,blurOnSelect:A=!1,clearOnBlur:F=!o.freeSolo,clearOnEscape:N=!1,componentName:E="useAutocomplete",defaultValue:S=o.multiple?io:null,disableClearable:H=!1,disableCloseOnSelect:te=!1,disabled:y,disabledItemsFocusable:oe=!1,disableListWrap:Pe=!1,filterOptions:ge=no,filterSelectedOptions:re=!1,freeSolo:Y=!1,getOptionDisabled:$,getOptionKey:ae,getOptionLabel:Te=t=>t.label??t,groupBy:ne,handleHomeEndKeys:_e=!o.freeSolo,id:J,includeInputInList:me=!1,inputValue:he,isOptionEqualToValue:se=(t,e)=>t===e,multiple:g=!1,onChange:Re,onClose:De,onHighlightChange:Ae,onInputChange:r,onOpen:s,open:I,openOnFocus:m=!1,options:w,readOnly:j=!1,renderValue:k,selectOnFocus:ct=!o.freeSolo,value:Ue}=o,B=Kt(J);let M=Te;M=t=>{const e=Te(t);return typeof e!="string"?String(e):e};const Oe=b.useRef(!1),Fe=b.useRef(!0),T=b.useRef(null),U=b.useRef(null),[Ee,Ot]=b.useState(null),[G,qe]=b.useState(-1),ut=P?0:-1,_=b.useRef(ut),St=b.useRef(Ft(S??Ue,g,M)).current,[c,Me]=yt({controlled:Ue,default:S,name:E}),[x,be]=yt({controlled:he,default:St,name:E,state:"inputValue"}),[Se,Ke]=b.useState(!1),$e=b.useCallback((t,e,a)=>{if(!(g?c.length<e.length:e!==null)&&!F)return;const l=Ft(e,g,M,k);x!==l&&(be(l),r&&r(t,l,a))},[M,x,g,r,be,F,c,k]),[ie,Ne]=yt({controlled:I,default:!1,name:E,state:"open"}),[$t,ke]=b.useState(!0),Ye=!g&&c!=null&&x===M(c),z=ie&&!j,v=z?ge(w.filter(t=>!(re&&(g?c:[c]).some(e=>e!==null&&se(t,e)))),{inputValue:Ye&&$t?"":x,getOptionLabel:M}):[],Q=ro({filteredOptions:v,value:c,inputValue:x});b.useEffect(()=>{const t=c!==Q.value;Se&&!t||Y&&!t||$e(null,c,"reset")},[c,$e,Se,Q.value,Y]);const Je=ie&&v.length>0&&!j,X=rt(t=>{if(t===-1)T.current.focus();else{const e=k?"data-item-index":"data-tag-index";Ee.querySelector(`[${e}="${t}"]`).focus()}});b.useEffect(()=>{g&&G>c.length-1&&(qe(-1),X(-1))},[c,g,G,X]);function pt(t,e){if(!U.current||t<0||t>=v.length)return-1;let a=t;for(;;){const f=U.current.querySelector(`[data-option-index="${a}"]`),l=oe?!1:!f||f.disabled||f.getAttribute("aria-disabled")==="true";if(f&&f.hasAttribute("tabindex")&&!l)return a;if(e==="next"?a=(a+1)%v.length:a=(a-1+v.length)%v.length,a===t)return-1}}const le=rt(({event:t,index:e,reason:a})=>{if(_.current=e,e===-1?T.current.removeAttribute("aria-activedescendant"):T.current.setAttribute("aria-activedescendant",`${B}-option-${e}`),Ae&&["mouse","keyboard","touch"].includes(a)&&Ae(t,e===-1?null:v[e],a),!U.current)return;const f=U.current.querySelector(`[role="option"].${d}-focused`);f&&(f.classList.remove(`${d}-focused`),f.classList.remove(`${d}-focusVisible`));let l=U.current;if(U.current.getAttribute("role")!=="listbox"&&(l=U.current.parentElement.querySelector('[role="listbox"]')),!l)return;if(e===-1){l.scrollTop=0;return}const C=U.current.querySelector(`[data-option-index="${e}"]`);if(C&&(C.classList.add(`${d}-focused`),a==="keyboard"&&C.classList.add(`${d}-focusVisible`),l.scrollHeight>l.clientHeight&&a!=="mouse"&&a!=="touch")){const O=C,q=l.clientHeight+l.scrollTop,xt=O.offsetTop+O.offsetHeight;xt>q?l.scrollTop=xt-l.clientHeight:O.offsetTop-O.offsetHeight*(ne?1.3:0)<l.scrollTop&&(l.scrollTop=O.offsetTop-O.offsetHeight*(ne?1.3:0))}}),Z=rt(({event:t,diff:e,direction:a="next",reason:f})=>{if(!z)return;const C=pt((()=>{const O=v.length-1;if(e==="reset")return ut;if(e==="start")return 0;if(e==="end")return O;const q=_.current+e;return q<0?q===-1&&me?-1:Pe&&_.current!==-1||Math.abs(e)>1?0:O:q>O?q===O+1&&me?-1:Pe||Math.abs(e)>1?O:0:q})(),a);if(le({index:C,reason:f,event:t}),u&&e!=="reset")if(C===-1)T.current.value=x;else{const O=M(v[C]);T.current.value=O,O.toLowerCase().indexOf(x.toLowerCase())===0&&x.length>0&&T.current.setSelectionRange(x.length,O.length)}}),dt=()=>{const t=(e,a)=>{const f=e?M(e):"",l=a?M(a):"";return f===l};if(_.current!==-1&&Q.filteredOptions&&Q.filteredOptions.length!==v.length&&Q.inputValue===x&&(g?c.length===Q.value.length&&Q.value.every((e,a)=>M(c[a])===M(e)):t(Q.value,c))){const e=Q.filteredOptions[_.current];if(e)return v.findIndex(a=>M(a)===M(e))}return-1},ze=b.useCallback(()=>{if(!z)return;const t=dt();if(t!==-1){_.current=t;return}const e=g?c[0]:c;if(v.length===0||e==null){Z({diff:"reset"});return}if(U.current){if(e!=null){const a=v[_.current];if(g&&a&&c.findIndex(l=>se(a,l))!==-1)return;const f=v.findIndex(l=>se(l,e));f===-1?Z({diff:"reset"}):le({index:f});return}if(_.current>=v.length-1){le({index:v.length-1});return}le({index:_.current})}},[v.length,g?!1:c,re,Z,le,z,x,g]),ft=rt(t=>{Yt(U,t),t&&ze()});b.useEffect(()=>{ze()},[ze]);const V=t=>{ie||(Ne(!0),ke(!0),s&&s(t))},xe=(t,e)=>{ie&&(Ne(!1),De&&De(t,e))},ce=(t,e,a,f)=>{if(g){if(c.length===e.length&&c.every((l,C)=>l===e[C]))return}else if(c===e)return;Re&&Re(t,e,a,f),Me(e)},we=b.useRef(!1),ee=(t,e,a="selectOption",f="options")=>{let l=a,C=e;if(g){C=Array.isArray(c)?c.slice():[];const O=C.findIndex(q=>se(e,q));O===-1?C.push(e):f!=="freeSolo"&&(C.splice(O,1),l="removeOption")}$e(t,C,l),ce(t,C,l,{option:e}),!te&&(!t||!t.ctrlKey&&!t.metaKey)&&xe(t,l),(A===!0||A==="touch"&&we.current||A==="mouse"&&!we.current)&&T.current.blur()};function Qe(t,e){if(t===-1)return-1;let a=t;for(;;){if(e==="next"&&a===c.length||e==="previous"&&a===-1)return-1;const f=k?"data-item-index":"data-tag-index",l=Ee.querySelector(`[${f}="${a}"]`);if(!l||!l.hasAttribute("tabindex")||l.disabled||l.getAttribute("aria-disabled")==="true")a+=e==="next"?1:-1;else return a}}const Xe=(t,e)=>{if(!g)return;x===""&&xe(t,"toggleInput");let a=G;G===-1?x===""&&e==="previous"&&(a=c.length-1):(a+=e==="next"?1:-1,a<0&&(a=0),a===c.length&&(a=-1)),a=Qe(a,e),qe(a),X(a)},ye=t=>{Oe.current=!0,be(""),r&&r(t,"","clear"),ce(t,g?[]:null,"clear")},gt=t=>e=>{if(t.onKeyDown&&t.onKeyDown(e),!e.defaultMuiPrevented&&(G!==-1&&!["ArrowLeft","ArrowRight"].includes(e.key)&&(qe(-1),X(-1)),e.which!==229))switch(e.key){case"Home":z&&_e&&(e.preventDefault(),Z({diff:"start",direction:"next",reason:"keyboard",event:e}));break;case"End":z&&_e&&(e.preventDefault(),Z({diff:"end",direction:"previous",reason:"keyboard",event:e}));break;case"PageUp":e.preventDefault(),Z({diff:-Dt,direction:"previous",reason:"keyboard",event:e}),V(e);break;case"PageDown":e.preventDefault(),Z({diff:Dt,direction:"next",reason:"keyboard",event:e}),V(e);break;case"ArrowDown":e.preventDefault(),Z({diff:1,direction:"next",reason:"keyboard",event:e}),V(e);break;case"ArrowUp":e.preventDefault(),Z({diff:-1,direction:"previous",reason:"keyboard",event:e}),V(e);break;case"ArrowLeft":!g&&k?X(0):Xe(e,"previous");break;case"ArrowRight":!g&&k?X(-1):Xe(e,"next");break;case"Enter":if(_.current!==-1&&z){const a=v[_.current],f=$?$(a):!1;if(e.preventDefault(),f)return;ee(e,a,"selectOption"),u&&T.current.setSelectionRange(T.current.value.length,T.current.value.length)}else Y&&x!==""&&Ye===!1&&(g&&e.preventDefault(),ee(e,x,"createOption","freeSolo"));break;case"Escape":z?(e.preventDefault(),e.stopPropagation(),xe(e,"escape")):N&&(x!==""||g&&c.length>0||k)&&(e.preventDefault(),e.stopPropagation(),ye(e));break;case"Backspace":if(g&&!j&&x===""&&c.length>0){const a=G===-1?c.length-1:G,f=c.slice();f.splice(a,1),ce(e,f,"removeOption",{option:c[a]})}!g&&k&&!j&&(Me(null),X(-1));break;case"Delete":if(g&&!j&&x===""&&c.length>0&&G!==-1){const a=G,f=c.slice();f.splice(a,1),ce(e,f,"removeOption",{option:c[a]})}!g&&k&&!j&&(Me(null),X(-1));break}},mt=t=>{Ke(!0),m&&!Oe.current&&V(t)},Ie=t=>{if(i(U)){T.current.focus();return}Ke(!1),Fe.current=!0,Oe.current=!1,D&&_.current!==-1&&z?ee(t,v[_.current],"blur"):D&&Y&&x!==""?ee(t,x,"blur","freeSolo"):F&&$e(t,c,"blur"),xe(t,"blur")},Ve=t=>{const e=t.target.value;x!==e&&(be(e),ke(!1),r&&r(t,e,"input")),e===""?!H&&!g&&ce(t,null,"clear"):V(t)},We=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));_.current!==e&&le({event:t,index:e,reason:"mouse"})},ht=t=>{le({event:t,index:Number(t.currentTarget.getAttribute("data-option-index")),reason:"touch"}),we.current=!0},bt=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));ee(t,v[e],"selectOption"),we.current=!1},Ze=t=>e=>{const a=c.slice();a.splice(t,1),ce(e,a,"removeOption",{option:c[t]})},kt=t=>{ce(t,null,"removeOption",{option:c})},Le=t=>{ie?xe(t,"toggleInput"):V(t)},R=t=>{t.currentTarget.contains(t.target)&&t.target.getAttribute("id")!==B&&t.preventDefault()},L=t=>{t.currentTarget.contains(t.target)&&(T.current.focus(),ct&&Fe.current&&T.current.selectionEnd-T.current.selectionStart===0&&T.current.select(),Fe.current=!1)},ue=t=>{!y&&(x===""||!ie)&&Le(t)};let He=Y&&x.length>0;He=He||(g?c.length>0:c!==null);let et=v;return ne&&(et=v.reduce((t,e,a)=>{const f=ne(e);return t.length>0&&t[t.length-1].group===f?t[t.length-1].options.push(e):t.push({key:a,index:a,group:f,options:[e]}),t},[])),y&&Se&&Ie(),{getRootProps:(t={})=>({...t,onKeyDown:gt(t),onMouseDown:R,onClick:L}),getInputLabelProps:()=>({id:`${B}-label`,htmlFor:B}),getInputProps:()=>({id:B,value:x,onBlur:Ie,onFocus:mt,onChange:Ve,onMouseDown:ue,"aria-activedescendant":z?"":null,"aria-autocomplete":u?"both":"list","aria-controls":Je?`${B}-listbox`:void 0,"aria-expanded":Je,autoComplete:"off",ref:T,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:y}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:ye}),getItemProps:({index:t=0}={})=>({...g&&{key:t},...k?{"data-item-index":t}:{"data-tag-index":t},tabIndex:-1,...!j&&{onDelete:g?Ze(t):kt}}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Le}),getTagProps:({index:t})=>({key:t,"data-tag-index":t,tabIndex:-1,...!j&&{onDelete:Ze(t)}}),getListboxProps:()=>({role:"listbox",id:`${B}-listbox`,"aria-labelledby":`${B}-label`,ref:ft,onMouseDown:t=>{t.preventDefault()}}),getOptionProps:({index:t,option:e})=>{const a=(g?c:[c]).some(l=>l!=null&&se(e,l)),f=$?$(e):!1;return{key:(ae==null?void 0:ae(e))??M(e),tabIndex:-1,role:"option",id:`${B}-option-${t}`,onMouseMove:We,onClick:bt,onTouchStart:ht,"data-option-index":t,"aria-disabled":f,"aria-selected":a}},id:B,inputValue:x,value:c,dirty:He,expanded:z&&Ee,popupOpen:z,focused:Se||G!==-1,anchorEl:Ee,setAnchorEl:Ot,focusedItem:G,focusedTag:G,groupedOptions:et}}function co(o){return zt("MuiListSubheader",o)}Vt("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const uo=o=>{const{classes:i,color:d,disableGutters:u,inset:P,disableSticky:D}=o,A={root:["root",d!=="default"&&`color${lt(d)}`,!u&&"gutters",P&&"inset",!D&&"sticky"]};return Ht(A,co,i)},po=K("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:d}=o;return[i.root,d.color!=="default"&&i[`color${lt(d.color)}`],!d.disableGutters&&i.gutters,d.inset&&i.inset,!d.disableSticky&&i.sticky]}})(Ce(({theme:o})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(o.vars||o).palette.text.secondary,fontFamily:o.typography.fontFamily,fontWeight:o.typography.fontWeightMedium,fontSize:o.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(o.vars||o).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:i})=>!i.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:i})=>i.inset,style:{paddingLeft:72}},{props:({ownerState:i})=>!i.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(o.vars||o).palette.background.paper}}]}))),At=b.forwardRef(function(i,d){const u=Wt({props:i,name:"MuiListSubheader"}),{className:P,color:D="default",component:A="li",disableGutters:F=!1,disableSticky:N=!1,inset:E=!1,...S}=u,H={...u,color:D,component:A,disableGutters:F,disableSticky:N,inset:E},te=uo(H);return n.jsx(po,{as:A,className:it(te.root,P),ref:d,ownerState:H,...S})});At&&(At.muiSkipListHighlight=!0);function fo(o){return zt("MuiAutocomplete",o)}const p=Vt("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var Et,Mt;const go=o=>{const{classes:i,disablePortal:d,expanded:u,focused:P,fullWidth:D,hasClearIcon:A,hasPopupIcon:F,inputFocused:N,popupOpen:E,size:S}=o,H={root:["root",u&&"expanded",P&&"focused",D&&"fullWidth",A&&"hasClearIcon",F&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",N&&"inputFocused"],tag:["tag",`tagSize${lt(S)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",E&&"popupIndicatorOpen"],popper:["popper",d&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return Ht(H,fo,i)},mo=K("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(o,i)=>{const{ownerState:d}=o,{fullWidth:u,hasClearIcon:P,hasPopupIcon:D,inputFocused:A,size:F}=d;return[{[`& .${p.tag}`]:i.tag},{[`& .${p.tag}`]:i[`tagSize${lt(F)}`]},{[`& .${p.inputRoot}`]:i.inputRoot},{[`& .${p.input}`]:i.input},{[`& .${p.input}`]:A&&i.inputFocused},i.root,u&&i.fullWidth,D&&i.hasPopupIcon,P&&i.hasClearIcon]}})({[`&.${p.focused} .${p.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${p.clearIndicator}`]:{visibility:"visible"}},[`& .${p.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${p.inputRoot}`]:{[`.${p.hasPopupIcon}&, .${p.hasClearIcon}&`]:{paddingRight:30},[`.${p.hasPopupIcon}.${p.hasClearIcon}&`]:{paddingRight:56},[`& .${p.input}`]:{width:0,minWidth:30}},[`& .${Ct.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Ct.root}.${ve.sizeSmall}`]:{[`& .${Ct.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Tt.root}`]:{padding:9,[`.${p.hasPopupIcon}&, .${p.hasClearIcon}&`]:{paddingRight:39},[`.${p.hasPopupIcon}.${p.hasClearIcon}&`]:{paddingRight:65},[`& .${p.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${p.endAdornment}`]:{right:9}},[`& .${Tt.root}.${ve.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${p.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${je.root}`]:{paddingTop:19,paddingLeft:8,[`.${p.hasPopupIcon}&, .${p.hasClearIcon}&`]:{paddingRight:39},[`.${p.hasPopupIcon}.${p.hasClearIcon}&`]:{paddingRight:65},[`& .${je.input}`]:{padding:"7px 4px"},[`& .${p.endAdornment}`]:{right:9}},[`& .${je.root}.${ve.sizeSmall}`]:{paddingBottom:1,[`& .${je.input}`]:{padding:"2.5px 4px"}},[`& .${ve.hiddenLabel}`]:{paddingTop:8},[`& .${je.root}.${ve.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${p.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${je.root}.${ve.hiddenLabel}.${ve.sizeSmall}`]:{[`& .${p.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${p.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${p.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${p.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${p.inputRoot}`]:{flexWrap:"wrap"}}}]}),ho=K("div",{name:"MuiAutocomplete",slot:"EndAdornment"})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),bo=K(Ge,{name:"MuiAutocomplete",slot:"ClearIndicator"})({marginRight:-2,padding:4,visibility:"hidden"}),xo=K(Ge,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(o,i)=>{const{ownerState:d}=o;return[i.popupIndicator,d.popupOpen&&i.popupIndicatorOpen]}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),yo=K(Gt,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(o,i)=>{const{ownerState:d}=o;return[{[`& .${p.option}`]:i.option},i.popper,d.disablePortal&&i.popperDisablePortal]}})(Ce(({theme:o})=>({zIndex:(o.vars||o).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}))),Io=K(Bt,{name:"MuiAutocomplete",slot:"Paper"})(Ce(({theme:o})=>({...o.typography.body1,overflow:"auto"}))),vo=K("div",{name:"MuiAutocomplete",slot:"Loading"})(Ce(({theme:o})=>({color:(o.vars||o).palette.text.secondary,padding:"14px 16px"}))),Co=K("div",{name:"MuiAutocomplete",slot:"NoOptions"})(Ce(({theme:o})=>({color:(o.vars||o).palette.text.secondary,padding:"14px 16px"}))),Po=K("ul",{name:"MuiAutocomplete",slot:"Listbox"})(Ce(({theme:o})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${p.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[o.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${p.focused}`]:{backgroundColor:(o.vars||o).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(o.vars||o).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${p.focusVisible}`]:{backgroundColor:(o.vars||o).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / ${o.vars.palette.action.selectedOpacity})`:vt(o.palette.primary.main,o.palette.action.selectedOpacity),[`&.${p.focused}`]:{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / calc(${o.vars.palette.action.selectedOpacity} + ${o.vars.palette.action.hoverOpacity}))`:vt(o.palette.primary.main,o.palette.action.selectedOpacity+o.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(o.vars||o).palette.action.selected}},[`&.${p.focusVisible}`]:{backgroundColor:o.vars?`rgba(${o.vars.palette.primary.mainChannel} / calc(${o.vars.palette.action.selectedOpacity} + ${o.vars.palette.action.focusOpacity}))`:vt(o.palette.primary.main,o.palette.action.selectedOpacity+o.palette.action.focusOpacity)}}}}))),Ao=K(At,{name:"MuiAutocomplete",slot:"GroupLabel"})(Ce(({theme:o})=>({backgroundColor:(o.vars||o).palette.background.paper,top:-8}))),Oo=K("ul",{name:"MuiAutocomplete",slot:"GroupUl"})({padding:0,[`& .${p.option}`]:{paddingLeft:24}}),Nt=b.forwardRef(function(i,d){const u=Wt({props:i,name:"MuiAutocomplete"}),{autoComplete:P=!1,autoHighlight:D=!1,autoSelect:A=!1,blurOnSelect:F=!1,ChipProps:N,className:E,clearIcon:S=Et||(Et=n.jsx(to,{fontSize:"small"})),clearOnBlur:H=!u.freeSolo,clearOnEscape:te=!1,clearText:y="Clear",closeText:oe="Close",componentsProps:Pe,defaultValue:ge=u.multiple?[]:null,disableClearable:re=!1,disableCloseOnSelect:Y=!1,disabled:$=!1,disabledItemsFocusable:ae=!1,disableListWrap:Te=!1,disablePortal:ne=!1,filterOptions:_e,filterSelectedOptions:J=!1,forcePopupIcon:me="auto",freeSolo:he=!1,fullWidth:se=!1,getLimitTagsText:g=h=>`+${h}`,getOptionDisabled:Re,getOptionKey:De,getOptionLabel:Ae,isOptionEqualToValue:r,groupBy:s,handleHomeEndKeys:I=!u.freeSolo,id:m,includeInputInList:w=!1,inputValue:j,limitTags:k=-1,ListboxComponent:ct,ListboxProps:Ue,loading:B=!1,loadingText:M="Loadingâ€¦",multiple:Oe=!1,noOptionsText:Fe="No options",onChange:T,onClose:U,onHighlightChange:Ee,onInputChange:Ot,onOpen:G,open:qe,openOnFocus:ut=!1,openText:_="Open",options:St,PaperComponent:c,PopperComponent:Me,popupIcon:x=Mt||(Mt=n.jsx(oo,{})),readOnly:be=!1,renderGroup:Se,renderInput:Ke,renderOption:$e,renderTags:ie,renderValue:Ne,selectOnFocus:$t=!u.freeSolo,size:ke="medium",slots:Ye={},slotProps:z={},value:v,...Q}=u,{getRootProps:Je,getInputProps:X,getInputLabelProps:pt,getPopupIndicatorProps:le,getClearProps:Z,getItemProps:dt,getListboxProps:ze,getOptionProps:ft,value:V,dirty:xe,expanded:ce,id:we,popupOpen:ee,focused:Qe,focusedItem:Xe,anchorEl:ye,setAnchorEl:gt,inputValue:mt,groupedOptions:Ie}=lo({...u,componentName:"Autocomplete"}),Ve=!re&&!$&&xe&&!be,We=(!he||me===!0)&&me!==!1,{onMouseDown:ht}=X(),{ref:bt,...Ze}=ze(),Le=Ae||(h=>h.label??h),R={...u,disablePortal:ne,expanded:ce,focused:Qe,fullWidth:se,getOptionLabel:Le,hasClearIcon:Ve,hasPopupIcon:We,inputFocused:Xe===-1,popupOpen:ee,size:ke},L=go(R),ue={slots:{paper:c,popper:Me,...Ye},slotProps:{chip:N,listbox:Ue,...Pe,...z}},[He,et]=It("listbox",{elementType:Po,externalForwardedProps:ue,ownerState:R,className:L.listbox,additionalProps:Ze,ref:bt}),[t,e]=It("paper",{elementType:Bt,externalForwardedProps:ue,ownerState:R,className:L.paper}),[a,f]=It("popper",{elementType:Gt,externalForwardedProps:ue,ownerState:R,className:L.popper,additionalProps:{disablePortal:ne,style:{width:ye?ye.clientWidth:null},role:"presentation",anchorEl:ye,open:ee}});let l;const C=h=>({className:L.tag,disabled:$,...dt(h)});if(ie&&Oe&&V.length>0?l=ie(V,C,R):Ne&&V?l=Ne(V,C,R):Oe&&V.length>0&&(l=V.map((h,pe)=>{const{key:de,...Be}=C({index:pe});return n.jsx(Ut,{label:Le(h),size:ke,...Be,...ue.slotProps.chip},de)})),k>-1&&Array.isArray(l)){const h=l.length-k;!Qe&&h>0&&(l=l.splice(0,k),l.push(n.jsx("span",{className:L.tag,children:g(h)},l.length)))}const q=Se||(h=>n.jsxs("li",{children:[n.jsx(Ao,{className:L.groupLabel,ownerState:R,component:"div",children:h.group}),n.jsx(Oo,{className:L.groupUl,ownerState:R,children:h.children})]},h.key)),qt=$e||((h,pe)=>{const{key:de,...Be}=h;return n.jsx("li",{...Be,children:Le(pe)},de)}),wt=(h,pe)=>{const de=ft({option:h,index:pe});return qt({...de,className:L.option},h,{selected:de["aria-selected"],index:pe,inputValue:mt},R)},tt=ue.slotProps.clearIndicator,ot=ue.slotProps.popupIndicator;return n.jsxs(b.Fragment,{children:[n.jsx(mo,{ref:d,className:it(L.root,E),ownerState:R,...Je(Q),children:Ke({id:we,disabled:$,fullWidth:!0,size:ke==="small"?"small":void 0,InputLabelProps:pt(),InputProps:{ref:gt,className:L.inputRoot,startAdornment:l,onMouseDown:h=>{h.target===h.currentTarget&&ht(h)},...(Ve||We)&&{endAdornment:n.jsxs(ho,{className:L.endAdornment,ownerState:R,children:[Ve?n.jsx(bo,{...Z(),"aria-label":y,title:y,ownerState:R,...tt,className:it(L.clearIndicator,tt==null?void 0:tt.className),children:S}):null,We?n.jsx(xo,{...le(),disabled:$,"aria-label":ee?oe:_,title:ee?oe:_,ownerState:R,...ot,className:it(L.popupIndicator,ot==null?void 0:ot.className),children:x}):null]})}},inputProps:{className:L.input,disabled:$,readOnly:be,...X()}})}),ye?n.jsx(yo,{as:a,...f,children:n.jsxs(Io,{as:t,...e,children:[B&&Ie.length===0?n.jsx(vo,{className:L.loading,ownerState:R,children:M}):null,Ie.length===0&&!he&&!B?n.jsx(Co,{className:L.noOptions,ownerState:R,role:"presentation",onMouseDown:h=>{h.preventDefault()},children:Fe}):null,Ie.length>0?n.jsx(He,{as:ct,...et,children:Ie.map((h,pe)=>s?q({key:h.key,group:h.group,children:h.options.map((de,Be)=>wt(de,h.index+Be))}):wt(h,pe))}):null]})}):null]})}),Ro=()=>{const o=Jt(),{slug:i}=Qt(),d=!!i,[u,P]=b.useState(!1),[D,A]=b.useState(""),[F,N]=b.useState(""),[E,S]=b.useState([]),[H,te]=b.useState([]),[y,oe]=b.useState({title:"",description:"",artist_id:"",year_created:"",medium:"",dimensions:"",price:"",is_for_sale:!1,is_featured:!1,tags:[]}),[Pe,ge]=b.useState({cover_image:null,images:[]}),[re,Y]=b.useState({cover_image:null,images:[]}),[$,ae]=b.useState({cover:null,gallery:[]});b.useEffect(()=>{Te(),ne(),d&&i&&_e()},[d,i]);const Te=async()=>{try{const r=await eo.getAll(),s=r.data.artists||r.data.data||r.data||[];S(Array.isArray(s)?s:[])}catch(r){console.error("Error loading artists:",r),S([])}},ne=async()=>{try{const r=await nt.getTags();te(Array.isArray(r.data)?r.data:[])}catch(r){console.error("Error loading tags:",r),te([])}},_e=async()=>{P(!0);try{const r=await nt.getBySlug(i),s=r.data.work||r.data.artwork||r.data;if(oe({title:s.title||"",description:s.description||s.overview||"",artist_id:s.artist_id||"",year_created:s.year_created||"",medium:s.medium||"",dimensions:s.dimensions||"",price:s.price||"",is_for_sale:s.is_for_sale||!1,is_featured:s.is_featured||!1,tags:Array.isArray(s.tags)?s.tags:[]}),s.cover_image_url&&ae(I=>({...I,cover:s.cover_image_url})),(s.images||s.image_urls)&&(s.images||s.image_urls).length>0){const I=s.images||s.image_urls;ae(m=>({...m,gallery:I.map(w=>({id:w.id,url:w.url,thumb:w.thumb}))}))}}catch(r){A("Failed to load artwork data"),console.error("Error loading artwork:",r)}finally{P(!1)}},J=r=>{const{name:s,value:I,checked:m}=r.target;oe(w=>({...w,[s]:s==="is_for_sale"||s==="is_featured"?m:I}))},me=(r,s)=>{oe(I=>({...I,tags:Array.isArray(s)?s:[]}))},he=(r,s)=>{const I=Array.from(r.target.files);if(s==="cover"&&I.length>0){const m=I[0];ge(j=>({...j,cover_image:m}));const w=new FileReader;w.onload=j=>{Y(k=>({...k,cover_image:j.target.result}))},w.readAsDataURL(m)}else s==="gallery"&&I.length>0&&(ge(m=>({...m,images:[...m.images,...I]})),I.forEach(m=>{const w=new FileReader;w.onload=j=>{Y(k=>({...k,images:[...k.images,j.target.result]}))},w.readAsDataURL(m)}))},se=()=>{ge(r=>({...r,cover_image:null})),Y(r=>({...r,cover_image:null})),ae(r=>({...r,cover:null}))},g=r=>{ge(s=>({...s,images:s.images.filter((I,m)=>m!==r)})),Y(s=>({...s,images:s.images.filter((I,m)=>m!==r)}))},Re=r=>{ae(s=>({...s,gallery:s.gallery.filter((I,m)=>m!==r)}))},De=async r=>{var s,I;r.preventDefault(),P(!0),A(""),N("");try{const m={...y,...Pe};d&&(m.remove_cover_image=!$.cover,$.gallery&&$.gallery.length>0?m.existing_image_ids=$.gallery.map(w=>w.id):m.existing_image_ids=[]),d?(await nt.update(i,m),N("Artwork updated successfully!")):(await nt.create(m),N("Artwork created successfully!")),setTimeout(()=>{o("/admin/artworks")},2e3)}catch(m){if((I=(s=m.response)==null?void 0:s.data)!=null&&I.errors){const w=m.response.data.errors,j=Object.values(w).flat().join(", ");A(j)}else A("Failed to save artwork. Please try again.");console.error("Error saving artwork:",m)}finally{P(!1)}},Ae=()=>{o("/admin/artworks")};return n.jsxs(Xt,{title:d?"Edit Artwork":"Create Artwork",children:[D&&n.jsx(jt,{severity:"error",sx:{mb:2},children:D}),F&&n.jsx(jt,{severity:"success",sx:{mb:2},children:F}),n.jsx(W,{component:"form",onSubmit:De,noValidate:!0,children:n.jsxs(W,{sx:{display:"flex",flexDirection:"column",gap:3},children:[n.jsx(fe,{fullWidth:!0,label:"Artwork Title",name:"title",value:y.title,onChange:J,required:!0,disabled:u}),n.jsx(fe,{fullWidth:!0,label:"Description",name:"description",value:y.description,onChange:J,multiline:!0,rows:4,disabled:u}),n.jsx(Nt,{fullWidth:!0,options:Array.isArray(E)?E:[],getOptionLabel:r=>r.artist_name||r.name||`Artist ${r.id}`,value:E.find(r=>r.id===y.artist_id)||null,onChange:(r,s)=>{oe(I=>({...I,artist_id:s?s.id:""}))},disabled:u,renderInput:r=>n.jsx(fe,{...r,label:"Artist",required:!0,helperText:`${E.length} artists loaded`,placeholder:"Search and select an artist..."}),renderOption:(r,s)=>n.jsx(W,{component:"li",...r,children:n.jsxs(W,{children:[n.jsx(at,{variant:"body1",children:s.artist_name||s.name||`Artist ${s.id}`}),s.specialties&&n.jsx(at,{variant:"caption",color:"text.secondary",children:s.specialties})]})}),noOptionsText:"No artists found"}),n.jsx(fe,{fullWidth:!0,label:"Year Created",name:"year_created",type:"number",value:y.year_created,onChange:J,disabled:u}),n.jsx(fe,{fullWidth:!0,label:"Medium",name:"medium",value:y.medium,onChange:J,placeholder:"e.g., Oil on canvas, Watercolor, Digital",disabled:u}),n.jsx(fe,{fullWidth:!0,label:"Dimensions",name:"dimensions",value:y.dimensions,onChange:J,placeholder:"e.g., 24 x 36 inches",disabled:u}),n.jsx(fe,{fullWidth:!0,label:"Price",name:"price",type:"number",value:y.price,onChange:J,disabled:u}),n.jsx(Nt,{multiple:!0,options:Array.isArray(H)?H:[],value:Array.isArray(y.tags)?y.tags:[],onChange:me,freeSolo:!0,renderTags:(r,s)=>(Array.isArray(r)?r:[]).map((I,m)=>b.createElement(Ut,{variant:"outlined",label:I,...s({index:m}),key:m})),renderInput:r=>n.jsx(fe,{...r,label:"Tags",placeholder:"Add tags...",disabled:u})}),n.jsxs(W,{children:[n.jsx(at,{variant:"subtitle1",gutterBottom:!0,children:"Cover Image"}),n.jsxs(W,{display:"flex",alignItems:"center",gap:2,children:[n.jsxs(st,{variant:"outlined",component:"label",disabled:u,children:["Choose Cover Image",n.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:r=>he(r,"cover")})]}),(re.cover_image||$.cover)&&n.jsx(W,{component:"img",src:re.cover_image||$.cover,sx:{width:80,height:80,objectFit:"cover",borderRadius:1}}),(re.cover_image||$.cover)&&n.jsx(Ge,{color:"error",onClick:se,disabled:u,children:n.jsx(Pt,{})})]})]}),n.jsxs(W,{children:[n.jsx(at,{variant:"subtitle1",gutterBottom:!0,children:"Gallery Images"}),n.jsxs(st,{variant:"outlined",component:"label",disabled:u,sx:{mb:2},children:["Add Gallery Images",n.jsx("input",{type:"file",hidden:!0,accept:"image/*",multiple:!0,onChange:r=>he(r,"gallery")})]}),n.jsxs(W,{display:"flex",flexWrap:"wrap",gap:1,children:[re.images.map((r,s)=>n.jsxs(W,{position:"relative",children:[n.jsx(W,{component:"img",src:r,sx:{width:80,height:80,objectFit:"cover",borderRadius:1}}),n.jsx(Ge,{size:"small",color:"error",onClick:()=>g(s),sx:{position:"absolute",top:-8,right:-8},children:n.jsx(Pt,{size:16})})]},`new-${s}`)),$.gallery.map((r,s)=>n.jsxs(W,{position:"relative",children:[n.jsx(W,{component:"img",src:r.thumb||r.url,sx:{width:80,height:80,objectFit:"cover",borderRadius:1}}),n.jsx(Ge,{size:"small",color:"error",onClick:()=>Re(s),sx:{position:"absolute",top:-8,right:-8},children:n.jsx(Pt,{size:16})})]},`existing-${r.id}`))]})]}),n.jsx(Lt,{control:n.jsx(_t,{name:"is_for_sale",checked:y.is_for_sale,onChange:J,disabled:u}),label:"For Sale"}),n.jsx(Lt,{control:n.jsx(_t,{name:"is_featured",checked:y.is_featured,onChange:J,disabled:u}),label:"Featured"}),n.jsxs(W,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[n.jsx(st,{variant:"outlined",onClick:Ae,disabled:u,children:"Cancel"}),n.jsx(st,{type:"submit",variant:"contained",disabled:u,startIcon:u?n.jsx(Zt,{size:20}):null,children:u?"Saving...":d?"Update":"Create"})]})]})})]})};export{Ro as default};
