import{a0 as W,r as n,j as e,M as T,B as h,a1 as L,G as v,a2 as R,a7 as $,T as r,N as G,a3 as H,I as f,a4 as V}from"./index-D1B0468_.js";import{b as D}from"./api-Qdp-uhWv.js";import{A as U}from"./Alert-Bj_8tNnp.js";import{T as q,S as J}from"./TextField-DMRjBjhn.js";import{I as K}from"./InputAdornment-ComWo2oT.js";import{I as O,a as Q}from"./IconSearch-Ce_gkvOg.js";import{F as X,I as Y}from"./InputLabel-BJex28sC.js";import{M as _}from"./MenuItem-otYi-go4.js";import{T as Z,a as ee,b as te,c as y,d as s,e as se,I as ae,f as re,D as ne,g as ie,h as le,i as oe}from"./TableRow-cdfXIQki.js";import{B as c}from"./Button-BS6WOeF2.js";const fe=()=>{var I;const x=W(),[u,k]=n.useState([]),[w,b]=n.useState(!0),[A,j]=n.useState(""),[m,p]=n.useState({open:!1,artist:null}),[d,P]=n.useState(""),[i,E]=n.useState("all"),[a,N]=n.useState({current_page:1,per_page:15,total:0,last_page:1});n.useEffect(()=>{g()},[d,i]);const g=async(t=1)=>{try{b(!0);const l={page:t,per_page:a.per_page,search:d||void 0,active:i==="active"?!0:i==="inactive"?!1:void 0},o=await D.getAll(l);k(o.data.data),N({current_page:o.data.current_page,per_page:o.data.per_page,total:o.data.total,last_page:o.data.last_page}),j("")}catch(l){j("Failed to fetch artists. Please check if the backend server is running."),console.error("Error fetching artists:",l)}finally{b(!1)}},F=async t=>{try{await D.delete(t.slug),g(a.current_page),p({open:!1,artist:null})}catch(l){j("Failed to delete artist"),console.error("Error deleting artist:",l)}},z=t=>{x(`/admin/artists/edit/${t.slug}`,{state:{artist:t}})},B=t=>{x(`/admin/artists/view/${t.slug}`,{state:{artist:t}})},M=t=>{p({open:!0,artist:t})},C=()=>{p({open:!1,artist:null})},S=t=>{g(t)};return w&&u.length===0?e.jsx(T,{title:"Artists Management",children:e.jsx(h,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px",children:e.jsx(L,{})})}):e.jsxs(T,{title:"Artists Management",secondary:e.jsx(c,{variant:"contained",startIcon:e.jsx(V,{}),onClick:()=>x("/admin/artists/create"),children:"Add New Artist"}),children:[A&&e.jsx(U,{severity:"error",sx:{mb:2},children:A}),e.jsxs(v,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(v,{item:!0,xs:12,sm:6,md:4,children:e.jsx(q,{fullWidth:!0,placeholder:"Search artists...",value:d,onChange:t=>P(t.target.value),InputProps:{startAdornment:e.jsx(K,{position:"start",children:e.jsx(O,{size:20})})}})}),e.jsx(v,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(Y,{children:"Status"}),e.jsxs(J,{value:i,onChange:t=>E(t.target.value),label:"Status",children:[e.jsx(_,{value:"all",children:"All Status"}),e.jsx(_,{value:"active",children:"Active"}),e.jsx(_,{value:"inactive",children:"Inactive"})]})]})})]}),e.jsx(Z,{component:R,children:e.jsxs(ee,{children:[e.jsx(te,{children:e.jsxs(y,{children:[e.jsx(s,{children:"Avatar"}),e.jsx(s,{children:"Artist Name"}),e.jsx(s,{children:"Specialties"}),e.jsx(s,{children:"Works Count"}),e.jsx(s,{children:"Commission Rate"}),e.jsx(s,{children:"Status"}),e.jsx(s,{align:"center",children:"Actions"})]})}),e.jsx(se,{children:u.length===0?e.jsx(y,{children:e.jsx(s,{colSpan:7,align:"center",children:e.jsxs(h,{py:3,children:[e.jsx($,{size:48,stroke:1.5,style:{color:"#ccc"}}),e.jsx(r,{variant:"h6",color:"textSecondary",sx:{mt:2},children:"No artists found"}),e.jsx(r,{variant:"body2",color:"textSecondary",children:d||i!=="all"?"Try adjusting your filters":"Start by adding your first artist"})]})})}):u.map(t=>e.jsxs(y,{hover:!0,children:[e.jsx(s,{children:e.jsx(G,{src:t.avatar_thumb_url,alt:t.artist_name,sx:{width:40,height:40},children:t.artist_name.charAt(0)})}),e.jsxs(s,{children:[e.jsx(r,{variant:"subtitle1",fontWeight:"medium",children:t.artist_name}),t.contact_email&&e.jsx(r,{variant:"body2",color:"textSecondary",children:t.contact_email})]}),e.jsx(s,{children:e.jsx(r,{variant:"body2",sx:{maxWidth:200},children:t.specialties||"Not specified"})}),e.jsx(s,{children:e.jsxs(h,{children:[e.jsxs(r,{variant:"body2",children:["Total: ",t.works_count]}),e.jsxs(r,{variant:"body2",color:"primary",children:["Published: ",t.published_works_count]})]})}),e.jsx(s,{children:t.commission_rate?`${t.commission_rate}%`:"Not set"}),e.jsx(s,{children:e.jsx(H,{label:t.is_active?"Active":"Inactive",color:t.is_active?"success":"default",size:"small"})}),e.jsxs(s,{align:"center",children:[e.jsx(f,{size:"small",onClick:()=>B(t),title:"View Artist",children:e.jsx(Q,{})}),e.jsx(f,{size:"small",onClick:()=>z(t),title:"Edit Artist",children:e.jsx(ae,{})}),e.jsx(f,{size:"small",onClick:()=>M(t),title:"Delete Artist",color:"error",children:e.jsx(re,{})})]})]},t.id))})]})}),a.last_page>1&&e.jsxs(h,{display:"flex",justifyContent:"center",mt:3,children:[e.jsx(c,{disabled:a.current_page===1,onClick:()=>S(a.current_page-1),sx:{mr:1},children:"Previous"}),e.jsxs(r,{variant:"body2",sx:{mx:2,alignSelf:"center"},children:["Page ",a.current_page," of ",a.last_page,"(",a.total," total artists)"]}),e.jsx(c,{disabled:a.current_page===a.last_page,onClick:()=>S(a.current_page+1),sx:{ml:1},children:"Next"})]}),e.jsxs(ne,{open:m.open,onClose:C,children:[e.jsx(ie,{children:"Delete Artist"}),e.jsx(le,{children:e.jsxs(r,{children:['Are you sure you want to delete "',(I=m.artist)==null?void 0:I.artist_name,'"? This action cannot be undone and will also delete all associated artworks.']})}),e.jsxs(oe,{children:[e.jsx(c,{onClick:C,children:"Cancel"}),e.jsx(c,{onClick:()=>F(m.artist),color:"error",variant:"contained",children:"Delete"})]})]})]})};export{fe as default};
